<Layouts.flash_group flash={@flash} />

<div class="gothic-hero min-h-screen relative overflow-hidden bg-gradient-to-b from-gray-800 via-gray-900 to-black">
  <!-- Gothic Stone Background -->
  <div class="gothic-stones absolute inset-0 opacity-40" style="background-image: url('data:image/svg+xml;utf8,<svg xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;0 0 100 100&quot;><defs><pattern id=&quot;stones&quot; patternUnits=&quot;userSpaceOnUse&quot; width=&quot;30&quot; height=&quot;30&quot;><rect width=&quot;30&quot; height=&quot;30&quot; fill=&quot;%23444&quot;/><rect x=&quot;0&quot; y=&quot;0&quot; width=&quot;14&quot; height=&quot;14&quot; fill=&quot;%23555&quot; stroke=&quot;%23333&quot; stroke-width=&quot;0.5&quot;/><rect x=&quot;16&quot; y=&quot;0&quot; width=&quot;14&quot; height=&quot;14&quot; fill=&quot;%23666&quot; stroke=&quot;%23333&quot; stroke-width=&quot;0.5&quot;/><rect x=&quot;8&quot; y=&quot;16&quot; width=&quot;14&quot; height=&quot;14&quot; fill=&quot;%23555&quot; stroke=&quot;%23333&quot; stroke-width=&quot;0.5&quot;/><path d=&quot;M5,5 L10,8 M20,3 L25,7 M12,20 L18,25&quot; stroke=&quot;%23222&quot; stroke-width=&quot;0.3&quot; fill=&quot;none&quot;/></pattern></defs><rect width=&quot;100&quot; height=&quot;100&quot; fill=&quot;url(%23stones)&quot; /></svg>');"></div>
  
<!-- Stone Texture Overlay -->
  <div class="absolute inset-0 bg-gray-900 opacity-30"></div>
  
<!-- Floating Dust Particles -->
  <div class="gothic-dust absolute inset-0 pointer-events-none">
    <div class="dust dust-1 absolute w-0.5 h-0.5 bg-gray-400 rounded-full animate-pulse opacity-60" style="top: 20%; left: 10%; animation-delay: 0s;"></div>
    <div class="dust dust-2 absolute w-0.5 h-0.5 bg-gray-500 rounded-full animate-pulse opacity-40" style="top: 60%; left: 80%; animation-delay: 3s;"></div>
    <div class="dust dust-3 absolute w-0.5 h-0.5 bg-gray-400 rounded-full animate-pulse opacity-50" style="top: 40%; left: 30%; animation-delay: 6s;"></div>
  </div>
  
<!-- Gothic Shadow -->
  <div class="gothic-shadow absolute bottom-0 w-full h-32 bg-gradient-to-t from-black to-transparent opacity-80"></div>

  <div class="hero-content text-center relative z-10 flex items-start justify-center min-h-screen pt-32">
    <div class="max-w-2xl w-full backdrop-blur-sm bg-gray-900/90 p-12 rounded-lg shadow-2xl border border-red-800/50 relative mr-8">
      <!-- Skull decoration -->
      <div class="absolute -top-6 left-1/2 transform -translate-x-1/2 text-4xl">ğŸ’€</div>
      
      <h1 class="text-5xl font-bold text-red-400 mb-2 text-shadow-lg">Crimson Shard</h1>
      <p class="text-lg text-red-300 mb-2">âš”ï¸ Dark Adventures Await in the Cursed Realm âš”ï¸</p>
      <p class="py-4 text-red-200">
        Create and manage your characters for perilous journeys through haunted dungeons and cursed lands.
      </p>

      <%= if @current_scope && @current_scope.user do %>
        <div class="space-y-4">
          <.button
            phx-click="show_character_selection"
            variant="primary"
            class="btn-lg bg-gray-800 hover:bg-gray-700 border-red-700 text-red-200"
          >
            ğŸ—¡ï¸ Enter the Darkness
          </.button>
          <.button navigate={~p"/characters"} class="btn-lg bg-gray-800 hover:bg-gray-700 border-red-700 text-red-200">
            ğŸ’€ Manage My Characters
          </.button>
          <.button navigate={~p"/marketplace"} class="btn-lg bg-gray-800 hover:bg-gray-700 border-red-700 text-red-200">
            ğŸº Dark Marketplace
          </.button>
        </div>
        
<!-- Character Selection Modal -->
        <div
          :if={@show_character_selection}
          class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
          phx-click="hide_character_selection"
        >
          <div
            class="bg-gray-900 p-8 rounded-lg shadow-2xl max-w-md w-full mx-4 border border-red-800"
            phx-click-away="hide_character_selection"
          >
            <h2 class="text-2xl font-bold mb-4 text-center text-red-400">Choose Your Champion</h2>

            <%= if @characters && length(@characters) > 0 do %>
              <div class="space-y-3">
                <%= for character <- @characters do %>
                  <div
                    class="card bg-gray-800 p-4 cursor-pointer hover:bg-gray-700 transition-colors border border-red-900"
                    phx-click="select_character"
                    phx-value-character-id={character.id}
                  >
                    <div class="flex justify-between items-center">
                      <div>
                        <h3 class="font-bold text-lg text-red-300">{character.name}</h3>
                        <p class="text-sm text-red-400 opacity-75">
                          Level {character.level} {character.class} â€¢ {character.race}
                        </p>
                        <%= if character.description do %>
                          <p class="text-xs mt-1 text-red-500 opacity-60">{character.description}</p>
                        <% end %>
                      </div>
                      <div class="text-right">
                        <div class="badge bg-red-800 text-red-200 border-red-700">Ready</div>
                      </div>
                    </div>
                  </div>
                <% end %>
              </div>

              <div class="divider my-4">or</div>

              <div class="text-center">
                <.link navigate={~p"/characters/new"} class="btn btn-outline btn-sm border-red-700 text-red-300 hover:bg-red-800">
                  ğŸ†• Forge New Champion
                </.link>
              </div>
            <% else %>
              <div class="text-center py-8">
                <p class="text-red-400 mb-4">Your soul awaits its first vessel...</p>
                <.link navigate={~p"/characters/new"} class="btn bg-red-800 hover:bg-red-700 border-red-600 text-red-100">
                  Forge Your First Champion
                </.link>
              </div>
            <% end %>

            <div class="mt-6 text-center">
              <button phx-click="hide_character_selection" class="btn btn-ghost btn-sm text-red-400 hover:text-red-300">
                Retreat
              </button>
            </div>
          </div>
        </div>
      <% else %>
        <div class="space-y-4">
          <.button navigate={~p"/users/register"} class="btn-lg bg-red-800 hover:bg-red-700 border-red-600 text-red-100">
            ğŸ©¸ Join the Darkness
          </.button>
          <.button navigate={~p"/users/log-in"} class="btn-lg bg-gray-800 hover:bg-gray-700 border-red-700 text-red-200">
            ğŸ—ï¸ Enter the Realm
          </.button>
        </div>
      <% end %>
    </div>
  </div>
</div>
