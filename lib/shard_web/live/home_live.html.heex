<Layouts.flash_group flash={@flash} />

<div class="prairie-hero min-h-screen relative overflow-hidden">
  <!-- Prairie Sky Background -->
  <div class="prairie-sky absolute inset-0"></div>
  
<!-- Grass Layers -->
  <div class="prairie-grass-back absolute bottom-0 w-full h-32"></div>
  <div class="prairie-grass-mid absolute bottom-0 w-full h-24"></div>
  <div class="prairie-grass-front absolute bottom-0 w-full h-16"></div>
  
<!-- Floating Clouds -->
  <div class="prairie-clouds absolute inset-0 pointer-events-none">
    <div class="cloud cloud-1"></div>
    <div class="cloud cloud-2"></div>
    <div class="cloud cloud-3"></div>
  </div>
  
<!-- Wind Effect -->
  <div class="prairie-wind absolute inset-0 pointer-events-none"></div>

  <div class="hero-content text-center relative z-10">
    <div class="max-w-md backdrop-blur-sm bg-base-100/80 p-8 rounded-lg shadow-xl border border-amber-200/30">
      <h1 class="text-5xl font-bold text-amber-900 mb-2">Welcome to Shard</h1>
      <p class="text-lg text-amber-800 mb-2">ğŸŒ¾ Adventures Await in the Prairie Realm ğŸŒ¾</p>
      <p class="py-4 text-amber-700">
        Create and manage your characters for epic adventures across the endless grasslands and beyond.
      </p>

      <%= if @current_scope && @current_scope.user do %>
        <div class="space-y-4">
          <.button
            phx-click="show_character_selection"
            variant="primary"
            class="btn-lg prairie-btn-primary"
          >
            ğŸ‡ Ride Into Adventure
          </.button>
          <.button navigate={~p"/characters"} class="btn-lg prairie-btn">
            âš”ï¸ Manage My Characters
          </.button>
          <.button navigate={~p"/marketplace"} class="btn-lg prairie-btn">
            ğŸ›’ Marketplace
          </.button>
        </div>
        
<!-- Character Selection Modal -->
        <div
          :if={@show_character_selection}
          class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
          phx-click="hide_character_selection"
        >
          <div
            class="bg-base-100 p-8 rounded-lg shadow-xl max-w-md w-full mx-4"
            phx-click-away="hide_character_selection"
          >
            <h2 class="text-2xl font-bold mb-4 text-center">Choose Your Character</h2>

            <%= if @characters && length(@characters) > 0 do %>
              <div class="space-y-3">
                <%= for character <- @characters do %>
                  <div
                    class="card bg-base-200 p-4 cursor-pointer hover:bg-base-300 transition-colors"
                    phx-click="select_character"
                    phx-value-character-id={character.id}
                  >
                    <div class="flex justify-between items-center">
                      <div>
                        <h3 class="font-bold text-lg">{character.name}</h3>
                        <p class="text-sm opacity-75">
                          Level {character.level} {character.class} â€¢ {character.race}
                        </p>
                        <%= if character.description do %>
                          <p class="text-xs mt-1 opacity-60">{character.description}</p>
                        <% end %>
                      </div>
                      <div class="text-right">
                        <div class="badge badge-primary">Ready</div>
                      </div>
                    </div>
                  </div>
                <% end %>
              </div>

              <div class="divider my-4">or</div>

              <div class="text-center">
                <.link navigate={~p"/characters/new"} class="btn btn-outline btn-sm">
                  ğŸ†• Create New Character
                </.link>
              </div>
            <% else %>
              <div class="text-center py-8">
                <p class="text-gray-500 mb-4">You don't have any characters yet.</p>
                <.link navigate={~p"/characters/new"} class="btn btn-primary">
                  Create Your First Character
                </.link>
              </div>
            <% end %>

            <div class="mt-6 text-center">
              <button phx-click="hide_character_selection" class="btn btn-ghost btn-sm">
                Cancel
              </button>
            </div>
          </div>
        </div>
      <% else %>
        <div class="space-y-4">
          <.button navigate={~p"/users/register"} class="btn-lg prairie-btn">
            ğŸŒ± Get Started
          </.button>
          <.button navigate={~p"/users/log-in"} class="btn-lg prairie-btn">
            ğŸšª Log In
          </.button>
        </div>
      <% end %>
    </div>
  </div>
</div>
