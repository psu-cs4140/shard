[info] Running ShardWeb.Endpoint with Bandit 1.8.0 at 127.0.0.1:4000 (http)
[info] Access ShardWeb.Endpoint at http://localhost:4000
[watch] build finished, watching for changes...
â‰ˆ tailwindcss v4.1.7

/*! ðŸŒ¼ daisyUI 5.0.35 */
sh: 1: watchman: not found
Done in 199ms
[info] GET /play/tutorial_terrain
[debug] Processing with ShardWeb.MudGameLive.__live__/0
  Parameters: %{"character_id" => "1", "character_name" => "player", "map_id" => "tutorial_terrain"}
  Pipelines: [:browser, :require_authenticated_user]
[debug] QUERY OK source="users_tokens" db=6.5ms queue=1.9ms idle=1979.6ms
SELECT u1."id", u1."email", u1."hashed_password", u1."confirmed_at", u1."admin", u1."inserted_at", u1."updated_at", u0."authenticated_at", u0."inserted_at" FROM "users_tokens" AS u0 INNER JOIN "users" AS u1 ON u1."id" = u0."user_id" WHERE ((u0."token" = $1) AND (u0."context" = $2)) AND (u0."inserted_at" > $3::timestamp + (-(14)::numeric * interval '1 day')) [<<64, 6, 50, 99, 57, 74, 87, 137, 131, 30, 66, 148, 156, 59, 25, 129, 230, 170, 38, 224, 183, 99, 18, 71, 27, 153, 137, 239, 38, 213, 81, 199>>, "session", ~U[2025-10-30 01:11:45.003535Z]]
[90mâ†³ ShardWeb.UserAuth.fetch_current_scope_for_user/2, at: lib/shard_web/user_auth.ex:76[0m
[debug] QUERY OK source="characters" db=0.6ms queue=0.5ms idle=173.5ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ Shard.Characters.get_character!/1, at: lib/shard/characters.ex:40[0m
[debug] QUERY OK source="users" db=0.4ms queue=0.6ms idle=151.4ms
SELECT u0."id", u0."email", u0."hashed_password", u0."confirmed_at", u0."admin", u0."inserted_at", u0."updated_at", u0."id" FROM "users" AS u0 WHERE (u0."id" = $1) [2]
[90mâ†³ ShardWeb.MudGameLive.get_character_from_params/1, at: lib/shard_web/live/user_live/mud_game_live.ex:344[0m
[debug] QUERY OK source="characters" db=0.8ms idle=48.0ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:362[0m
[debug] QUERY OK source="hotbar_slots" db=0.7ms queue=1.1ms idle=43.6ms
SELECT h0."id", h0."slot_number", h0."character_id", h0."item_id", h0."inventory_id", h0."inserted_at", h0."updated_at", h0."character_id" FROM "hotbar_slots" AS h0 WHERE (h0."character_id" = $1) ORDER BY h0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:363[0m
[debug] QUERY OK source="character_inventories" db=0.7ms queue=0.8ms idle=43.6ms
SELECT c0."id", c0."quantity", c0."slot_position", c0."equipped", c0."equipment_slot", c0."character_id", c0."item_id", c0."inserted_at", c0."updated_at", c0."character_id" FROM "character_inventories" AS c0 WHERE (c0."character_id" = $1) ORDER BY c0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:363[0m
[debug] QUERY OK source="room_items" db=8.2ms queue=1.2ms idle=53.4ms
SELECT r0."id", r0."location", r0."quantity", r0."x_position", r0."y_position", r0."respawn_timer", r0."is_permanent", r0."item_id", r0."dropped_by_character_id", r0."inserted_at", r0."updated_at" FROM "room_items" AS r0 INNER JOIN "items" AS i1 ON r0."item_id" = i1."id" WHERE (r0."location" = '0,2,0') AND (i1."name" = 'Tutorial Key') []
[90mâ†³ Shard.Items.create_tutorial_key/0, at: lib/shard/items.ex:342[0m
[debug] QUERY OK source="npcs" db=15.1ms queue=1.0ms idle=66.2ms
SELECT n0."id", n0."name", n0."description", n0."level", n0."health", n0."max_health", n0."mana", n0."max_mana", n0."strength", n0."dexterity", n0."intelligence", n0."constitution", n0."experience_reward", n0."gold_reward", n0."npc_type", n0."dialogue", n0."inventory", n0."location_x", n0."location_y", n0."location_z", n0."is_active", n0."respawn_time", n0."last_death_at", n0."faction", n0."aggression_level", n0."movement_pattern", n0."properties", n0."room_id", n0."inserted_at", n0."updated_at" FROM "npcs" AS n0 WHERE (((n0."location_x" = 0) AND (n0."location_y" = 0)) AND (n0."name" = 'Goldie')) []
[90mâ†³ Shard.Npcs.create_tutorial_npc_goldie/0, at: lib/shard/npcs.ex:171[0m
[debug] QUERY OK source="rooms" db=0.5ms queue=0.9ms idle=87.0ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 2, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="rooms" db=1.2ms idle=88.8ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 1, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="doors" db=0.6ms queue=1.0ms idle=92.0ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE ((d0."from_room_id" = $1) AND (d0."direction" = $2)) [11, "north"]
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:391[0m
[debug] QUERY OK db=0.2ms idle=62.9ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK source="doors" db=0.6ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.3ms
DELETE FROM "doors" WHERE "id" = $1 [330]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.2ms
DELETE FROM "doors" WHERE "id" = $1 [329]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=1.1ms
commit []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK db=0.2ms idle=73.5ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:402[0m
[debug] QUERY OK source="doors" db=5.5ms
INSERT INTO "doors" ("name","description","direction","door_type","from_room_id","is_locked","key_required","to_room_id","properties","new_dungeon","inserted_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) RETURNING "id" ["Locked Dungeon Gate", "A heavy iron gate that blocks the entrance to the dungeon. It requires a key to open.", "north", "locked_gate", 11, true, "Tutorial Key", 10, %{}, false, ~U[2025-10-30 01:11:45Z], ~U[2025-10-30 01:11:45Z]]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=1.0ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.5ms
INSERT INTO "doors" ("direction","door_type","from_room_id","is_locked","key_required","to_room_id","properties","new_dungeon","inserted_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) RETURNING "id" ["south", "locked_gate", 10, true, "Tutorial Key", 11, %{}, false, ~U[2025-10-30 01:11:45Z], ~U[2025-10-30 01:11:45Z]]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=1.1ms
commit []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:402[0m
[debug] QUERY OK source="monsters" db=0.3ms queue=0.5ms idle=102.4ms
SELECT m0."id", m0."name", m0."race", m0."health", m0."max_health", m0."attack_damage", m0."potential_loot_drops", m0."xp_amount", m0."level", m0."description", m0."location_id", m0."inserted_at", m0."updated_at" FROM "monsters" AS m0 []
[90mâ†³ Shard.Monsters.list_monsters/0, at: lib/shard/monsters.ex:21[0m
[debug] QUERY OK source="rooms" db=0.3ms queue=0.4ms idle=96.5ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ ShardWeb.UserLive.MonsterComponents.load_monsters_from_database/2, at: lib/shard_web/live/user_live/monster_components.ex:12[0m
[debug] QUERY OK source="rooms" db=0.6ms queue=0.3ms idle=97.4ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ anonymous fn/1 in ShardWeb.UserLive.MonsterComponents.load_monsters_from_database/2, at: lib/shard_web/live/user_live/monster_components.ex:20[0m
[debug] QUERY OK source="rooms" db=1.1ms idle=84.0ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [0, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:248[0m
[debug] QUERY OK source="doors" db=0.6ms queue=0.5ms idle=65.9ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (d0."from_room_id" = $1) [3]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:253[0m
[debug] QUERY OK source="rooms" db=0.2ms queue=0.4ms idle=88.4ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.5ms queue=0.6ms idle=84.5ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."from_room_id" FROM "doors" AS d0 WHERE (d0."from_room_id" = ANY($1)) ORDER BY d0."from_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.6ms queue=0.8ms idle=88.1ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."to_room_id" FROM "doors" AS d0 WHERE (d0."to_room_id" = ANY($1)) ORDER BY d0."to_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.3ms queue=0.3ms idle=70.1ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.4ms queue=0.3ms idle=40.1ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[10, 9, 11, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.4ms queue=0.5ms idle=50.7ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[9, 10, 8, 11, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[info] Sent 200 in 322ms
[info] CONNECTED TO Phoenix.LiveView.Socket in 40Âµs
  Transport: :websocket
  Serializer: Phoenix.Socket.V2.JSONSerializer
  Parameters: %{"_csrf_token" => "Pl17UykBKzk4WEJxMAFeMisGaRhcOyEXhj9gFUxrM353yRhbDtYp-JFb", "_live_referer" => "undefined", "_mount_attempts" => "0", "_mounts" => "0", "_track_static" => %{"0" => "http://localhost:4000/assets/css/app.css", "1" => "http://localhost:4000/assets/js/app.js"}, "vsn" => "2.0.0"}
[debug] MOUNT ShardWeb.MudGameLive
  Parameters: %{"character_id" => "1", "character_name" => "player", "map_id" => "tutorial_terrain"}
  Session: %{"_csrf_token" => "V7B4oTSKukwBIS6Por0hqqgu", "live_socket_id" => "users_sessions:QAYyYzlKV4mDHkKUnDsZgeaqJuC3YxJHG5mJ7ybVUcc=", "user_token" => <<64, 6, 50, 99, 57, 74, 87, 137, 131, 30, 66, 148, 156, 59, 25, 129, 230, 170, 38, 224, 183, 99, 18, 71, 27, 153, 137, 239, 38, 213, 81, 199>>}
[debug] QUERY OK source="users_tokens" db=6.6ms queue=0.1ms idle=653.6ms
SELECT u1."id", u1."email", u1."hashed_password", u1."confirmed_at", u1."admin", u1."inserted_at", u1."updated_at", u0."authenticated_at", u0."inserted_at" FROM "users_tokens" AS u0 INNER JOIN "users" AS u1 ON u1."id" = u0."user_id" WHERE ((u0."token" = $1) AND (u0."context" = $2)) AND (u0."inserted_at" > $3::timestamp + (-(14)::numeric * interval '1 day')) [<<64, 6, 50, 99, 57, 74, 87, 137, 131, 30, 66, 148, 156, 59, 25, 129, 230, 170, 38, 224, 183, 99, 18, 71, 27, 153, 137, 239, 38, 213, 81, 199>>, "session", ~U[2025-10-30 01:11:45.827384Z]]
[90mâ†³ ShardWeb.UserAuth.get_user_by_token/1, at: lib/shard_web/user_auth.ex:314[0m
[debug] QUERY OK source="characters" db=1.6ms idle=659.8ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ Shard.Characters.get_character!/1, at: lib/shard/characters.ex:40[0m
[debug] QUERY OK source="users" db=2.4ms idle=657.5ms
SELECT u0."id", u0."email", u0."hashed_password", u0."confirmed_at", u0."admin", u0."inserted_at", u0."updated_at", u0."id" FROM "users" AS u0 WHERE (u0."id" = $1) [2]
[90mâ†³ ShardWeb.MudGameLive.get_character_from_params/1, at: lib/shard_web/live/user_live/mud_game_live.ex:344[0m
[debug] QUERY OK source="characters" db=1.7ms idle=658.9ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:362[0m
[debug] QUERY OK source="character_inventories" db=3.5ms idle=635.7ms
SELECT c0."id", c0."quantity", c0."slot_position", c0."equipped", c0."equipment_slot", c0."character_id", c0."item_id", c0."inserted_at", c0."updated_at", c0."character_id" FROM "character_inventories" AS c0 WHERE (c0."character_id" = $1) ORDER BY c0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:363[0m
[debug] QUERY OK source="hotbar_slots" db=4.2ms queue=0.1ms idle=637.4ms
SELECT h0."id", h0."slot_number", h0."character_id", h0."item_id", h0."inventory_id", h0."inserted_at", h0."updated_at", h0."character_id" FROM "hotbar_slots" AS h0 WHERE (h0."character_id" = $1) ORDER BY h0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:363[0m
[debug] QUERY OK source="room_items" db=3.9ms idle=640.2ms
SELECT r0."id", r0."location", r0."quantity", r0."x_position", r0."y_position", r0."respawn_timer", r0."is_permanent", r0."item_id", r0."dropped_by_character_id", r0."inserted_at", r0."updated_at" FROM "room_items" AS r0 INNER JOIN "items" AS i1 ON r0."item_id" = i1."id" WHERE (r0."location" = '0,2,0') AND (i1."name" = 'Tutorial Key') []
[90mâ†³ Shard.Items.create_tutorial_key/0, at: lib/shard/items.ex:342[0m
[debug] QUERY OK source="npcs" db=2.2ms idle=643.5ms
SELECT n0."id", n0."name", n0."description", n0."level", n0."health", n0."max_health", n0."mana", n0."max_mana", n0."strength", n0."dexterity", n0."intelligence", n0."constitution", n0."experience_reward", n0."gold_reward", n0."npc_type", n0."dialogue", n0."inventory", n0."location_x", n0."location_y", n0."location_z", n0."is_active", n0."respawn_time", n0."last_death_at", n0."faction", n0."aggression_level", n0."movement_pattern", n0."properties", n0."room_id", n0."inserted_at", n0."updated_at" FROM "npcs" AS n0 WHERE (((n0."location_x" = 0) AND (n0."location_y" = 0)) AND (n0."name" = 'Goldie')) []
[90mâ†³ Shard.Npcs.create_tutorial_npc_goldie/0, at: lib/shard/npcs.ex:171[0m
[debug] QUERY OK source="rooms" db=2.2ms queue=0.2ms idle=644.8ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 2, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="rooms" db=4.0ms idle=647.7ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 1, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="doors" db=3.7ms queue=0.1ms idle=31.8ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE ((d0."from_room_id" = $1) AND (d0."direction" = $2)) [11, "north"]
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:391[0m
[debug] QUERY OK db=0.5ms queue=0.1ms idle=34.2ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK source="doors" db=3.0ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.9ms
DELETE FROM "doors" WHERE "id" = $1 [332]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.5ms
DELETE FROM "doors" WHERE "id" = $1 [331]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=12.2ms
commit []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK db=0.3ms queue=0.1ms idle=51.7ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:402[0m
[debug] QUERY OK source="doors" db=1.6ms
INSERT INTO "doors" ("name","description","direction","door_type","from_room_id","is_locked","key_required","to_room_id","properties","new_dungeon","inserted_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) RETURNING "id" ["Locked Dungeon Gate", "A heavy iron gate that blocks the entrance to the dungeon. It requires a key to open.", "north", "locked_gate", 11, true, "Tutorial Key", 10, %{}, false, ~U[2025-10-30 01:11:45Z], ~U[2025-10-30 01:11:45Z]]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=3.8ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=1.1ms
INSERT INTO "doors" ("direction","door_type","from_room_id","is_locked","key_required","to_room_id","properties","new_dungeon","inserted_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) RETURNING "id" ["south", "locked_gate", 10, true, "Tutorial Key", 11, %{}, false, ~U[2025-10-30 01:11:45Z], ~U[2025-10-30 01:11:45Z]]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=1.8ms
commit []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:402[0m
[debug] QUERY OK source="monsters" db=1.1ms queue=0.1ms idle=62.4ms
SELECT m0."id", m0."name", m0."race", m0."health", m0."max_health", m0."attack_damage", m0."potential_loot_drops", m0."xp_amount", m0."level", m0."description", m0."location_id", m0."inserted_at", m0."updated_at" FROM "monsters" AS m0 []
[90mâ†³ Shard.Monsters.list_monsters/0, at: lib/shard/monsters.ex:21[0m
[debug] QUERY OK source="rooms" db=1.6ms queue=0.2ms idle=55.1ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ ShardWeb.UserLive.MonsterComponents.load_monsters_from_database/2, at: lib/shard_web/live/user_live/monster_components.ex:12[0m
[debug] QUERY OK source="rooms" db=1.1ms idle=56.8ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ anonymous fn/1 in ShardWeb.UserLive.MonsterComponents.load_monsters_from_database/2, at: lib/shard_web/live/user_live/monster_components.ex:20[0m
[debug] QUERY OK source="rooms" db=0.7ms idle=54.1ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [0, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:248[0m
[debug] QUERY OK source="doors" db=1.9ms queue=0.1ms idle=52.7ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (d0."from_room_id" = $1) [3]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:253[0m
[debug] Replied in 92ms
[debug] QUERY OK source="rooms" db=1.0ms idle=59.2ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=1.3ms idle=52.2ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."from_room_id" FROM "doors" AS d0 WHERE (d0."from_room_id" = ANY($1)) ORDER BY d0."from_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=2.4ms idle=56.4ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."to_room_id" FROM "doors" AS d0 WHERE (d0."to_room_id" = ANY($1)) ORDER BY d0."to_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=2.4ms idle=35.1ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=2.2ms queue=0.2ms idle=28.5ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[9, 10, 8, 11, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=2.7ms queue=0.2ms idle=26.9ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[10, 9, 11, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] HANDLE EVENT "keypress" in ShardWeb.MudGameLive
  Parameters: %{"key" => "ArrowRight"}
[debug] QUERY OK source="rooms" db=3.3ms queue=0.1ms idle=962.5ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [0, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.valid_movement/3, at: lib/shard_web/live/user_live/movement.ex:131[0m
[debug] QUERY OK source="doors" db=5.9ms queue=0.2ms idle=965.3ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE ((d0."from_room_id" = $1) AND (d0."direction" = $2)) [3, "east"]
[90mâ†³ ShardWeb.UserLive.Movement.valid_movement/3, at: lib/shard_web/live/user_live/movement.ex:152[0m
Moving through standard door
[debug] QUERY OK source="rooms" db=1.8ms queue=0.1ms idle=971.2ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (r0."id" = $1) [6]
[90mâ†³ ShardWeb.UserLive.Movement.valid_movement/3, at: lib/shard_web/live/user_live/movement.ex:169[0m
[debug] QUERY OK source="rooms" db=3.0ms queue=0.1ms idle=972.6ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [0, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.execute_movement/2, at: lib/shard_web/live/user_live/movement.ex:41[0m
[debug] QUERY OK source="rooms" db=1.7ms queue=0.2ms idle=968.2ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [1, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.execute_movement/2, at: lib/shard_web/live/user_live/movement.ex:42[0m
[debug] QUERY OK source="npcs" db=3.1ms queue=2.1ms idle=969.0ms
SELECT n0."id", n0."name", n0."description", n0."level", n0."health", n0."max_health", n0."mana", n0."max_mana", n0."strength", n0."dexterity", n0."intelligence", n0."constitution", n0."experience_reward", n0."gold_reward", n0."npc_type", n0."dialogue", n0."inventory", n0."location_x", n0."location_y", n0."location_z", n0."is_active", n0."respawn_time", n0."last_death_at", n0."faction", n0."aggression_level", n0."movement_pattern", n0."properties", n0."room_id", n0."inserted_at", n0."updated_at" FROM "npcs" AS n0 WHERE (((n0."location_x" = $1) AND (n0."location_y" = $2)) AND (n0."is_active" = TRUE)) [1, 0]
[90mâ†³ ShardWeb.UserLive.Movement.execute_movement/2, at: lib/shard_web/live/user_live/movement.ex:45[0m
[debug] QUERY OK source="room_items" db=2.9ms queue=2.7ms idle=974.4ms
SELECT i1."name", i1."description", i1."item_type", r0."quantity" FROM "room_items" AS r0 INNER JOIN "items" AS i1 ON r0."item_id" = i1."id" WHERE (r0."location" = $1) AND ((i1."is_active" IS NULL) OR (i1."is_active" = TRUE)) ["1,0,0"]
[90mâ†³ ShardWeb.UserLive.Movement.get_items_at_location/3, at: lib/shard_web/live/user_live/movement.ex:294[0m
[debug] QUERY OK source="items" db=1.5ms queue=1.6ms idle=976.9ms
SELECT i0."name", i0."description", i0."item_type" FROM "items" AS i0 WHERE (((i0."location" = $1) AND ((i0."map" = $2) OR (i0."map" IS NULL))) AND ((i0."is_active" IS NULL) OR (i0."is_active" = TRUE))) ["1,0,0", "tutorial_terrain"]
[90mâ†³ ShardWeb.UserLive.Movement.get_items_at_location/3, at: lib/shard_web/live/user_live/movement.ex:309[0m
[debug] QUERY OK source="rooms" db=0.7ms idle=978.8ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [1, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:248[0m
[debug] QUERY OK source="doors" db=0.7ms queue=0.1ms idle=979.2ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (d0."from_room_id" = $1) [6]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:253[0m
[debug] Replied in 46ms
[debug] QUERY OK source="rooms" db=0.9ms idle=42.2ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=1.2ms idle=34.0ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."from_room_id" FROM "doors" AS d0 WHERE (d0."from_room_id" = ANY($1)) ORDER BY d0."from_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=1.4ms idle=36.8ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."to_room_id" FROM "doors" AS d0 WHERE (d0."to_room_id" = ANY($1)) ORDER BY d0."to_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.4ms idle=30.9ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.6ms idle=29.2ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[9, 10, 8, 11, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=1.2ms queue=0.4ms idle=22.9ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[10, 9, 11, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] HANDLE EVENT "keypress" in ShardWeb.MudGameLive
  Parameters: %{"key" => "ArrowRight"}
[debug] QUERY OK source="rooms" db=1.2ms queue=0.1ms idle=370.9ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [1, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.valid_movement/3, at: lib/shard_web/live/user_live/movement.ex:131[0m
[debug] QUERY OK source="doors" db=0.8ms queue=0.1ms idle=368.9ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE ((d0."from_room_id" = $1) AND (d0."direction" = $2)) [6, "east"]
[90mâ†³ ShardWeb.UserLive.Movement.valid_movement/3, at: lib/shard_web/live/user_live/movement.ex:152[0m
Moving through standard door
[debug] QUERY OK source="rooms" db=1.0ms idle=364.2ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ ShardWeb.UserLive.Movement.valid_movement/3, at: lib/shard_web/live/user_live/movement.ex:169[0m
[debug] QUERY OK source="rooms" db=0.9ms idle=364.9ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [1, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.execute_movement/2, at: lib/shard_web/live/user_live/movement.ex:41[0m
[debug] QUERY OK source="rooms" db=0.5ms idle=364.7ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.execute_movement/2, at: lib/shard_web/live/user_live/movement.ex:42[0m
[debug] QUERY OK source="npcs" db=1.6ms idle=363.5ms
SELECT n0."id", n0."name", n0."description", n0."level", n0."health", n0."max_health", n0."mana", n0."max_mana", n0."strength", n0."dexterity", n0."intelligence", n0."constitution", n0."experience_reward", n0."gold_reward", n0."npc_type", n0."dialogue", n0."inventory", n0."location_x", n0."location_y", n0."location_z", n0."is_active", n0."respawn_time", n0."last_death_at", n0."faction", n0."aggression_level", n0."movement_pattern", n0."properties", n0."room_id", n0."inserted_at", n0."updated_at" FROM "npcs" AS n0 WHERE (((n0."location_x" = $1) AND (n0."location_y" = $2)) AND (n0."is_active" = TRUE)) [2, 0]
[90mâ†³ ShardWeb.UserLive.Movement.execute_movement/2, at: lib/shard_web/live/user_live/movement.ex:45[0m
[debug] QUERY OK source="room_items" db=2.1ms idle=365.5ms
SELECT i1."name", i1."description", i1."item_type", r0."quantity" FROM "room_items" AS r0 INNER JOIN "items" AS i1 ON r0."item_id" = i1."id" WHERE (r0."location" = $1) AND ((i1."is_active" IS NULL) OR (i1."is_active" = TRUE)) ["2,0,0"]
[90mâ†³ ShardWeb.UserLive.Movement.get_items_at_location/3, at: lib/shard_web/live/user_live/movement.ex:294[0m
[debug] QUERY OK source="items" db=1.3ms idle=366.9ms
SELECT i0."name", i0."description", i0."item_type" FROM "items" AS i0 WHERE (((i0."location" = $1) AND ((i0."map" = $2) OR (i0."map" IS NULL))) AND ((i0."is_active" IS NULL) OR (i0."is_active" = TRUE))) ["2,0,0", "tutorial_terrain"]
[90mâ†³ ShardWeb.UserLive.Movement.get_items_at_location/3, at: lib/shard_web/live/user_live/movement.ex:309[0m
[debug] QUERY OK source="rooms" db=0.5ms idle=367.4ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:248[0m
[debug] QUERY OK source="doors" db=0.9ms idle=367.3ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (d0."from_room_id" = $1) [9]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:253[0m
[debug] Replied in 16ms
[debug] QUERY OK source="rooms" db=0.9ms queue=0.1ms idle=14.1ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=1.5ms idle=14.5ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."to_room_id" FROM "doors" AS d0 WHERE (d0."to_room_id" = ANY($1)) ORDER BY d0."to_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=1.4ms queue=0.2ms idle=13.1ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."from_room_id" FROM "doors" AS d0 WHERE (d0."from_room_id" = ANY($1)) ORDER BY d0."from_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=1.3ms idle=13.9ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=1.0ms idle=13.2ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[9, 10, 8, 11, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=1.4ms queue=0.2ms idle=15.1ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[10, 9, 11, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
Done in 2ms
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_live.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_live.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_live.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_live.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_live.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_live.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_live.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_live.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_live.ex
Done in 484Âµs
Compiling 2 files (.ex)
Compiling 2 files (.ex)
[watch] build started (change: "../_build/dev/phoenix-colocated/shard/index.js")
[watch] build finished
Compiling 2 files (.ex)
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
Done in 4ms
Compiling 2 files (.ex)
Compiling 2 files (.ex)
Compiling 2 files (.ex)
Compiling 2 files (.ex)
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
Done in 77Âµs
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_live.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_live.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_live.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_live.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_live.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_live.ex
Done in 804Âµs
Compiling 2 files (.ex)
Generated shard app
[info] GET /play/tutorial_terrain
[debug] Processing with ShardWeb.MudGameLive.__live__/0
  Parameters: %{"character_id" => "1", "character_name" => "player", "map_id" => "tutorial_terrain"}
  Pipelines: [:browser, :require_authenticated_user]
[debug] QUERY OK source="users_tokens" db=1.4ms idle=161.7ms
SELECT u1."id", u1."email", u1."hashed_password", u1."confirmed_at", u1."admin", u1."inserted_at", u1."updated_at", u0."authenticated_at", u0."inserted_at" FROM "users_tokens" AS u0 INNER JOIN "users" AS u1 ON u1."id" = u0."user_id" WHERE ((u0."token" = $1) AND (u0."context" = $2)) AND (u0."inserted_at" > $3::timestamp + (-(14)::numeric * interval '1 day')) [<<64, 6, 50, 99, 57, 74, 87, 137, 131, 30, 66, 148, 156, 59, 25, 129, 230, 170, 38, 224, 183, 99, 18, 71, 27, 153, 137, 239, 38, 213, 81, 199>>, "session", ~U[2025-10-30 01:16:01.208358Z]]
[90mâ†³ ShardWeb.UserAuth.fetch_current_scope_for_user/2, at: lib/shard_web/user_auth.ex:76[0m
[debug] QUERY OK source="characters" db=0.6ms idle=163.4ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ Shard.Characters.get_character!/1, at: lib/shard/characters.ex:40[0m
[debug] QUERY OK source="users" db=0.7ms idle=164.3ms
SELECT u0."id", u0."email", u0."hashed_password", u0."confirmed_at", u0."admin", u0."inserted_at", u0."updated_at", u0."id" FROM "users" AS u0 WHERE (u0."id" = $1) [2]
[90mâ†³ ShardWeb.MudGameLive.get_character_from_params/1, at: lib/shard_web/live/user_live/mud_game_live.ex:245[0m
[debug] QUERY OK source="characters" db=0.2ms idle=165.2ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:263[0m
[debug] QUERY OK source="character_inventories" db=0.6ms idle=165.9ms
SELECT c0."id", c0."quantity", c0."slot_position", c0."equipped", c0."equipment_slot", c0."character_id", c0."item_id", c0."inserted_at", c0."updated_at", c0."character_id" FROM "character_inventories" AS c0 WHERE (c0."character_id" = $1) ORDER BY c0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:264[0m
[debug] QUERY OK source="hotbar_slots" db=0.6ms idle=165.8ms
SELECT h0."id", h0."slot_number", h0."character_id", h0."item_id", h0."inventory_id", h0."inserted_at", h0."updated_at", h0."character_id" FROM "hotbar_slots" AS h0 WHERE (h0."character_id" = $1) ORDER BY h0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:264[0m
[debug] QUERY OK source="room_items" db=1.3ms idle=166.8ms
SELECT r0."id", r0."location", r0."quantity", r0."x_position", r0."y_position", r0."respawn_timer", r0."is_permanent", r0."item_id", r0."dropped_by_character_id", r0."inserted_at", r0."updated_at" FROM "room_items" AS r0 INNER JOIN "items" AS i1 ON r0."item_id" = i1."id" WHERE (r0."location" = '0,2,0') AND (i1."name" = 'Tutorial Key') []
[90mâ†³ Shard.Items.create_tutorial_key/0, at: lib/shard/items.ex:342[0m
[debug] QUERY OK source="npcs" db=0.1ms idle=168.4ms
SELECT n0."id", n0."name", n0."description", n0."level", n0."health", n0."max_health", n0."mana", n0."max_mana", n0."strength", n0."dexterity", n0."intelligence", n0."constitution", n0."experience_reward", n0."gold_reward", n0."npc_type", n0."dialogue", n0."inventory", n0."location_x", n0."location_y", n0."location_z", n0."is_active", n0."respawn_time", n0."last_death_at", n0."faction", n0."aggression_level", n0."movement_pattern", n0."properties", n0."room_id", n0."inserted_at", n0."updated_at" FROM "npcs" AS n0 WHERE (((n0."location_x" = 0) AND (n0."location_y" = 0)) AND (n0."name" = 'Goldie')) []
[90mâ†³ Shard.Npcs.create_tutorial_npc_goldie/0, at: lib/shard/npcs.ex:171[0m
[debug] QUERY OK source="rooms" db=0.4ms idle=17.1ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 2, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="rooms" db=0.2ms idle=14.2ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 1, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="doors" db=0.4ms idle=7.0ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE ((d0."from_room_id" = $1) AND (d0."direction" = $2)) [11, "north"]
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:391[0m
[debug] QUERY OK db=0.1ms idle=6.5ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK source="doors" db=0.2ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.3ms
DELETE FROM "doors" WHERE "id" = $1 [334]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.1ms
DELETE FROM "doors" WHERE "id" = $1 [333]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=35.9ms
commit []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK db=1.5ms idle=53.9ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:402[0m
[debug] QUERY OK source="doors" db=0.8ms
INSERT INTO "doors" ("name","description","direction","door_type","from_room_id","is_locked","key_required","to_room_id","properties","new_dungeon","inserted_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) RETURNING "id" ["Locked Dungeon Gate", "A heavy iron gate that blocks the entrance to the dungeon. It requires a key to open.", "north", "locked_gate", 11, true, "Tutorial Key", 10, %{}, false, ~U[2025-10-30 01:16:01Z], ~U[2025-10-30 01:16:01Z]]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.7ms decode=5.9ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.6ms
INSERT INTO "doors" ("direction","door_type","from_room_id","is_locked","key_required","to_room_id","properties","new_dungeon","inserted_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) RETURNING "id" ["south", "locked_gate", 10, true, "Tutorial Key", 11, %{}, false, ~U[2025-10-30 01:16:01Z], ~U[2025-10-30 01:16:01Z]]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=1.2ms
commit []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:402[0m
[debug] QUERY OK source="monsters" db=0.2ms idle=75.8ms
SELECT m0."id", m0."name", m0."race", m0."health", m0."max_health", m0."attack_damage", m0."potential_loot_drops", m0."xp_amount", m0."level", m0."description", m0."location_id", m0."inserted_at", m0."updated_at" FROM "monsters" AS m0 []
[90mâ†³ Shard.Monsters.list_monsters/0, at: lib/shard/monsters.ex:21[0m
[debug] QUERY OK source="rooms" db=0.6ms idle=73.2ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ ShardWeb.UserLive.MonsterComponents.load_monsters_from_database/2, at: lib/shard_web/live/user_live/monster_components.ex:12[0m
[debug] QUERY OK source="rooms" db=0.4ms idle=35.1ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ anonymous fn/1 in ShardWeb.UserLive.MonsterComponents.load_monsters_from_database/2, at: lib/shard_web/live/user_live/monster_components.ex:20[0m
[debug] QUERY OK source="rooms" db=0.3ms idle=8.7ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [0, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:248[0m
[debug] QUERY OK source="doors" db=0.3ms idle=3.1ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (d0."from_room_id" = $1) [3]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:253[0m
[debug] QUERY OK source="rooms" db=0.3ms idle=7.9ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=1.3ms idle=8.5ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."from_room_id" FROM "doors" AS d0 WHERE (d0."from_room_id" = ANY($1)) ORDER BY d0."from_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=1.5ms idle=8.7ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."to_room_id" FROM "doors" AS d0 WHERE (d0."to_room_id" = ANY($1)) ORDER BY d0."to_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.3ms idle=9.9ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.4ms idle=9.6ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[9, 10, 8, 11, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[info] GET /play/tutorial_terrain
[debug] Processing with ShardWeb.MudGameLive.__live__/0
  Parameters: %{"character_id" => "1", "character_name" => "player", "map_id" => "tutorial_terrain"}
  Pipelines: [:browser, :require_authenticated_user]
[debug] QUERY OK source="rooms" db=3.4ms idle=10.4ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[10, 9, 11, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="users_tokens" db=1.8ms idle=11.0ms
SELECT u1."id", u1."email", u1."hashed_password", u1."confirmed_at", u1."admin", u1."inserted_at", u1."updated_at", u0."authenticated_at", u0."inserted_at" FROM "users_tokens" AS u0 INNER JOIN "users" AS u1 ON u1."id" = u0."user_id" WHERE ((u0."token" = $1) AND (u0."context" = $2)) AND (u0."inserted_at" > $3::timestamp + (-(14)::numeric * interval '1 day')) [<<64, 6, 50, 99, 57, 74, 87, 137, 131, 30, 66, 148, 156, 59, 25, 129, 230, 170, 38, 224, 183, 99, 18, 71, 27, 153, 137, 239, 38, 213, 81, 199>>, "session", ~U[2025-10-30 01:16:01.301926Z]]
[90mâ†³ ShardWeb.UserAuth.fetch_current_scope_for_user/2, at: lib/shard_web/user_auth.ex:76[0m
[info] GET /play/tutorial_terrain
[info] GET /play/tutorial_terrain
[debug] Processing with ShardWeb.MudGameLive.__live__/0
  Parameters: %{"character_id" => "1", "character_name" => "player", "map_id" => "tutorial_terrain"}
  Pipelines: [:browser, :require_authenticated_user]
[debug] QUERY OK source="characters" db=1.2ms idle=13.0ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ Shard.Characters.get_character!/1, at: lib/shard/characters.ex:40[0m
[debug] Processing with ShardWeb.MudGameLive.__live__/0
  Parameters: %{"character_id" => "1", "character_name" => "player", "map_id" => "tutorial_terrain"}
  Pipelines: [:browser, :require_authenticated_user]
[debug] QUERY OK source="users_tokens" db=1.3ms idle=9.1ms
SELECT u1."id", u1."email", u1."hashed_password", u1."confirmed_at", u1."admin", u1."inserted_at", u1."updated_at", u0."authenticated_at", u0."inserted_at" FROM "users_tokens" AS u0 INNER JOIN "users" AS u1 ON u1."id" = u0."user_id" WHERE ((u0."token" = $1) AND (u0."context" = $2)) AND (u0."inserted_at" > $3::timestamp + (-(14)::numeric * interval '1 day')) [<<64, 6, 50, 99, 57, 74, 87, 137, 131, 30, 66, 148, 156, 59, 25, 129, 230, 170, 38, 224, 183, 99, 18, 71, 27, 153, 137, 239, 38, 213, 81, 199>>, "session", ~U[2025-10-30 01:16:01.306339Z]]
[90mâ†³ ShardWeb.UserAuth.fetch_current_scope_for_user/2, at: lib/shard_web/user_auth.ex:76[0m
[debug] QUERY OK source="users_tokens" db=1.7ms idle=14.1ms
SELECT u1."id", u1."email", u1."hashed_password", u1."confirmed_at", u1."admin", u1."inserted_at", u1."updated_at", u0."authenticated_at", u0."inserted_at" FROM "users_tokens" AS u0 INNER JOIN "users" AS u1 ON u1."id" = u0."user_id" WHERE ((u0."token" = $1) AND (u0."context" = $2)) AND (u0."inserted_at" > $3::timestamp + (-(14)::numeric * interval '1 day')) [<<64, 6, 50, 99, 57, 74, 87, 137, 131, 30, 66, 148, 156, 59, 25, 129, 230, 170, 38, 224, 183, 99, 18, 71, 27, 153, 137, 239, 38, 213, 81, 199>>, "session", ~U[2025-10-30 01:16:01.306274Z]]
[90mâ†³ ShardWeb.UserAuth.fetch_current_scope_for_user/2, at: lib/shard_web/user_auth.ex:76[0m
[debug] QUERY OK source="users" db=2.7ms idle=14.4ms
SELECT u0."id", u0."email", u0."hashed_password", u0."confirmed_at", u0."admin", u0."inserted_at", u0."updated_at", u0."id" FROM "users" AS u0 WHERE (u0."id" = $1) [2]
[90mâ†³ ShardWeb.MudGameLive.get_character_from_params/1, at: lib/shard_web/live/user_live/mud_game_live.ex:245[0m
[debug] QUERY OK source="characters" db=0.9ms idle=9.4ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ Shard.Characters.get_character!/1, at: lib/shard/characters.ex:40[0m
[debug] QUERY OK source="characters" db=0.3ms idle=9.1ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:263[0m
[debug] QUERY OK source="characters" db=1.2ms idle=9.2ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ Shard.Characters.get_character!/1, at: lib/shard/characters.ex:40[0m
[debug] QUERY OK source="users" db=0.5ms queue=0.1ms idle=8.6ms
SELECT u0."id", u0."email", u0."hashed_password", u0."confirmed_at", u0."admin", u0."inserted_at", u0."updated_at", u0."id" FROM "users" AS u0 WHERE (u0."id" = $1) [2]
[90mâ†³ ShardWeb.MudGameLive.get_character_from_params/1, at: lib/shard_web/live/user_live/mud_game_live.ex:245[0m
[debug] QUERY OK source="users" db=0.5ms idle=5.8ms
SELECT u0."id", u0."email", u0."hashed_password", u0."confirmed_at", u0."admin", u0."inserted_at", u0."updated_at", u0."id" FROM "users" AS u0 WHERE (u0."id" = $1) [2]
[90mâ†³ ShardWeb.MudGameLive.get_character_from_params/1, at: lib/shard_web/live/user_live/mud_game_live.ex:245[0m
[info] Sent 200 in 104ms
[debug] QUERY OK source="hotbar_slots" db=0.8ms idle=4.0ms
SELECT h0."id", h0."slot_number", h0."character_id", h0."item_id", h0."inventory_id", h0."inserted_at", h0."updated_at", h0."character_id" FROM "hotbar_slots" AS h0 WHERE (h0."character_id" = $1) ORDER BY h0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:264[0m
[debug] QUERY OK source="character_inventories" db=0.9ms queue=0.1ms idle=5.9ms
SELECT c0."id", c0."quantity", c0."slot_position", c0."equipped", c0."equipment_slot", c0."character_id", c0."item_id", c0."inserted_at", c0."updated_at", c0."character_id" FROM "character_inventories" AS c0 WHERE (c0."character_id" = $1) ORDER BY c0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:264[0m
[debug] QUERY OK source="characters" db=0.8ms idle=2.5ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:263[0m
[debug] QUERY OK source="characters" db=1.4ms idle=2.7ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:263[0m
[debug] QUERY OK source="hotbar_slots" db=0.9ms idle=2.3ms
SELECT h0."id", h0."slot_number", h0."character_id", h0."item_id", h0."inventory_id", h0."inserted_at", h0."updated_at", h0."character_id" FROM "hotbar_slots" AS h0 WHERE (h0."character_id" = $1) ORDER BY h0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:264[0m
[debug] QUERY OK source="character_inventories" db=1.0ms idle=2.3ms
SELECT c0."id", c0."quantity", c0."slot_position", c0."equipped", c0."equipment_slot", c0."character_id", c0."item_id", c0."inserted_at", c0."updated_at", c0."character_id" FROM "character_inventories" AS c0 WHERE (c0."character_id" = $1) ORDER BY c0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:264[0m
[debug] QUERY OK source="room_items" db=1.8ms idle=2.2ms
SELECT r0."id", r0."location", r0."quantity", r0."x_position", r0."y_position", r0."respawn_timer", r0."is_permanent", r0."item_id", r0."dropped_by_character_id", r0."inserted_at", r0."updated_at" FROM "room_items" AS r0 INNER JOIN "items" AS i1 ON r0."item_id" = i1."id" WHERE (r0."location" = '0,2,0') AND (i1."name" = 'Tutorial Key') []
[90mâ†³ Shard.Items.create_tutorial_key/0, at: lib/shard/items.ex:342[0m
[debug] QUERY OK source="character_inventories" db=0.6ms idle=2.8ms
SELECT c0."id", c0."quantity", c0."slot_position", c0."equipped", c0."equipment_slot", c0."character_id", c0."item_id", c0."inserted_at", c0."updated_at", c0."character_id" FROM "character_inventories" AS c0 WHERE (c0."character_id" = $1) ORDER BY c0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:264[0m
[debug] QUERY OK source="hotbar_slots" db=0.9ms idle=2.8ms
SELECT h0."id", h0."slot_number", h0."character_id", h0."item_id", h0."inventory_id", h0."inserted_at", h0."updated_at", h0."character_id" FROM "hotbar_slots" AS h0 WHERE (h0."character_id" = $1) ORDER BY h0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:264[0m
[debug] QUERY OK source="npcs" db=1.0ms idle=3.6ms
SELECT n0."id", n0."name", n0."description", n0."level", n0."health", n0."max_health", n0."mana", n0."max_mana", n0."strength", n0."dexterity", n0."intelligence", n0."constitution", n0."experience_reward", n0."gold_reward", n0."npc_type", n0."dialogue", n0."inventory", n0."location_x", n0."location_y", n0."location_z", n0."is_active", n0."respawn_time", n0."last_death_at", n0."faction", n0."aggression_level", n0."movement_pattern", n0."properties", n0."room_id", n0."inserted_at", n0."updated_at" FROM "npcs" AS n0 WHERE (((n0."location_x" = 0) AND (n0."location_y" = 0)) AND (n0."name" = 'Goldie')) []
[90mâ†³ Shard.Npcs.create_tutorial_npc_goldie/0, at: lib/shard/npcs.ex:171[0m
[debug] QUERY OK source="room_items" db=1.1ms idle=2.4ms
SELECT r0."id", r0."location", r0."quantity", r0."x_position", r0."y_position", r0."respawn_timer", r0."is_permanent", r0."item_id", r0."dropped_by_character_id", r0."inserted_at", r0."updated_at" FROM "room_items" AS r0 INNER JOIN "items" AS i1 ON r0."item_id" = i1."id" WHERE (r0."location" = '0,2,0') AND (i1."name" = 'Tutorial Key') []
[90mâ†³ Shard.Items.create_tutorial_key/0, at: lib/shard/items.ex:342[0m
[debug] QUERY OK source="rooms" db=0.6ms idle=3.4ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 2, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="rooms" db=0.2ms idle=2.4ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 1, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="npcs" db=1.3ms idle=2.6ms
SELECT n0."id", n0."name", n0."description", n0."level", n0."health", n0."max_health", n0."mana", n0."max_mana", n0."strength", n0."dexterity", n0."intelligence", n0."constitution", n0."experience_reward", n0."gold_reward", n0."npc_type", n0."dialogue", n0."inventory", n0."location_x", n0."location_y", n0."location_z", n0."is_active", n0."respawn_time", n0."last_death_at", n0."faction", n0."aggression_level", n0."movement_pattern", n0."properties", n0."room_id", n0."inserted_at", n0."updated_at" FROM "npcs" AS n0 WHERE (((n0."location_x" = 0) AND (n0."location_y" = 0)) AND (n0."name" = 'Goldie')) []
[90mâ†³ Shard.Npcs.create_tutorial_npc_goldie/0, at: lib/shard/npcs.ex:171[0m
[debug] QUERY OK source="doors" db=0.4ms idle=2.6ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE ((d0."from_room_id" = $1) AND (d0."direction" = $2)) [11, "north"]
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:391[0m
[debug] QUERY OK db=0.0ms idle=2.2ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK source="room_items" db=2.2ms idle=2.8ms
SELECT r0."id", r0."location", r0."quantity", r0."x_position", r0."y_position", r0."respawn_timer", r0."is_permanent", r0."item_id", r0."dropped_by_character_id", r0."inserted_at", r0."updated_at" FROM "room_items" AS r0 INNER JOIN "items" AS i1 ON r0."item_id" = i1."id" WHERE (r0."location" = '0,2,0') AND (i1."name" = 'Tutorial Key') []
[90mâ†³ Shard.Items.create_tutorial_key/0, at: lib/shard/items.ex:342[0m
[debug] QUERY OK source="rooms" db=0.4ms idle=3.1ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 2, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="doors" db=0.4ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="npcs" db=0.6ms idle=2.5ms
SELECT n0."id", n0."name", n0."description", n0."level", n0."health", n0."max_health", n0."mana", n0."max_mana", n0."strength", n0."dexterity", n0."intelligence", n0."constitution", n0."experience_reward", n0."gold_reward", n0."npc_type", n0."dialogue", n0."inventory", n0."location_x", n0."location_y", n0."location_z", n0."is_active", n0."respawn_time", n0."last_death_at", n0."faction", n0."aggression_level", n0."movement_pattern", n0."properties", n0."room_id", n0."inserted_at", n0."updated_at" FROM "npcs" AS n0 WHERE (((n0."location_x" = 0) AND (n0."location_y" = 0)) AND (n0."name" = 'Goldie')) []
[90mâ†³ Shard.Npcs.create_tutorial_npc_goldie/0, at: lib/shard/npcs.ex:171[0m
[debug] QUERY OK source="doors" db=0.2ms
DELETE FROM "doors" WHERE "id" = $1 [336]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="rooms" db=0.5ms queue=0.1ms idle=2.6ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 1, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="rooms" db=0.2ms idle=3.0ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 2, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="doors" db=0.4ms
DELETE FROM "doors" WHERE "id" = $1 [335]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="rooms" db=0.2ms idle=2.4ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 1, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="doors" db=0.4ms idle=2.7ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE ((d0."from_room_id" = $1) AND (d0."direction" = $2)) [11, "north"]
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:391[0m
[debug] QUERY OK db=0.2ms idle=2.2ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK source="doors" db=0.2ms idle=2.3ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE ((d0."from_room_id" = $1) AND (d0."direction" = $2)) [11, "north"]
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:391[0m
[debug] QUERY OK db=0.1ms idle=2.2ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK db=0.9ms
commit []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK source="doors" db=0.2ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.1ms
DELETE FROM "doors" WHERE "id" = $1 [336]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=0.2ms idle=2.5ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:402[0m
[debug] QUERY OK source="doors" db=0.4ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.3ms
DELETE FROM "doors" WHERE "id" = $1 [335]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.7ms
INSERT INTO "doors" ("name","description","direction","door_type","from_room_id","is_locked","key_required","to_room_id","properties","new_dungeon","inserted_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) RETURNING "id" ["Locked Dungeon Gate", "A heavy iron gate that blocks the entrance to the dungeon. It requires a key to open.", "north", "locked_gate", 11, true, "Tutorial Key", 10, %{}, false, ~U[2025-10-30 01:16:01Z], ~U[2025-10-30 01:16:01Z]]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.2ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.3ms
INSERT INTO "doors" ("direction","door_type","from_room_id","is_locked","key_required","to_room_id","properties","new_dungeon","inserted_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) RETURNING "id" ["south", "locked_gate", 10, true, "Tutorial Key", 11, %{}, false, ~U[2025-10-30 01:16:01Z], ~U[2025-10-30 01:16:01Z]]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=1.4ms
commit []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:402[0m
[debug] QUERY OK source="monsters" db=1.3ms idle=6.3ms
SELECT m0."id", m0."name", m0."race", m0."health", m0."max_health", m0."attack_damage", m0."potential_loot_drops", m0."xp_amount", m0."level", m0."description", m0."location_id", m0."inserted_at", m0."updated_at" FROM "monsters" AS m0 []
[90mâ†³ Shard.Monsters.list_monsters/0, at: lib/shard/monsters.ex:21[0m
[debug] QUERY OK source="rooms" db=0.4ms idle=7.8ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ ShardWeb.UserLive.MonsterComponents.load_monsters_from_database/2, at: lib/shard_web/live/user_live/monster_components.ex:12[0m
[debug] QUERY OK source="rooms" db=0.5ms idle=8.2ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ anonymous fn/1 in ShardWeb.UserLive.MonsterComponents.load_monsters_from_database/2, at: lib/shard_web/live/user_live/monster_components.ex:20[0m
[debug] QUERY OK source="rooms" db=0.5ms idle=8.7ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [0, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:248[0m
[debug] QUERY OK source="doors" db=0.5ms idle=9.6ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (d0."from_room_id" = $1) [3]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:253[0m
[debug] QUERY OK source="rooms" db=0.2ms idle=10.3ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.7ms idle=6.1ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."from_room_id" FROM "doors" AS d0 WHERE (d0."from_room_id" = ANY($1)) ORDER BY d0."from_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK db=0.2ms
rollback []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK db=0.2ms
rollback []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK source="doors" db=2.6ms idle=10.5ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."to_room_id" FROM "doors" AS d0 WHERE (d0."to_room_id" = ANY($1)) ORDER BY d0."to_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.5ms idle=7.8ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.3ms idle=8.1ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[9, 10, 8, 11, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.3ms idle=7.4ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[10, 9, 11, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[info] Sent 200 in 33ms
[info] Sent 409 in 60ms
[info] Sent 409 in 61ms
[debug] ** (Ecto.StaleEntryError) attempted to delete a stale struct:

%Shard.Map.Door{__meta__: #Ecto.Schema.Metadata<:loaded, "doors">, id: 336, name: nil, description: nil, direction: "south", is_locked: true, key_required: "Tutorial Key", door_type: "locked_gate", properties: %{}, new_dungeon: false, from_room_id: 10, from_room: #Ecto.Association.NotLoaded<association :from_room is not loaded>, to_room_id: 11, to_room: #Ecto.Association.NotLoaded<association :to_room is not loaded>, inserted_at: ~U[2025-10-30 01:16:01Z], updated_at: ~U[2025-10-30 01:16:01Z]}

This typically happens when the struct no longer exists in the database or a database trigger/rule has forbidden the action. If stale entries are expected, you may use `:stale_error_field` to convert this into a changeset error, or set `:allow_stale` to true if you would like stale operations to be considered a success (such as a stale deletion)

    (ecto 3.13.2) lib/ecto/repo/schema.ex:1023: Ecto.Repo.Schema.apply/4
    (ecto 3.13.2) lib/ecto/repo/schema.ex:721: anonymous fn/13 in Ecto.Repo.Schema.do_delete/4
    (ecto 3.13.2) lib/ecto/repo/schema.ex:407: Ecto.Repo.Schema.delete!/4
    (shard 0.1.0) lib/shard/map.ex:162: anonymous fn/1 in Shard.Map.delete_door/1
    (shard 0.1.0) lib/shard/repo.ex:2: anonymous fn/1 in Shard.Repo.transaction/2
    (ecto 3.13.2) lib/ecto/repo/transaction.ex:7: anonymous fn/2 in Ecto.Repo.Transaction.transact/4
    (ecto_sql 3.13.2) lib/ecto/adapters/sql.ex:1458: anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4
    (db_connection 2.8.0) lib/db_connection.ex:1753: DBConnection.run_transaction/4
    (shard 0.1.0) lib/shard/items.ex:395: Shard.Items.create_dungeon_door/0
    (shard 0.1.0) lib/shard_web/live/user_live/mud_game_live.ex:298: ShardWeb.MudGameLive.setup_tutorial_door/0
    (shard 0.1.0) lib/shard_web/live/user_live/mud_game_live.ex:275: ShardWeb.MudGameLive.setup_tutorial_content/1
    (shard 0.1.0) lib/shard_web/live/user_live/mud_game_live.ex:26: ShardWeb.MudGameLive.mount/3
    (phoenix_live_view 1.1.8) lib/phoenix_live_view/utils.ex:348: anonymous fn/6 in Phoenix.LiveView.Utils.maybe_call_live_view_mount!/5
    (telemetry 1.3.0) /home/owner/gjbauer-shard/deps/telemetry/src/telemetry.erl:324: :telemetry.span/3
    (phoenix_live_view 1.1.8) lib/phoenix_live_view/static.ex:324: Phoenix.LiveView.Static.call_mount_and_handle_params!/5
    (phoenix_live_view 1.1.8) lib/phoenix_live_view/static.ex:155: Phoenix.LiveView.Static.do_render/4
    (phoenix_live_view 1.1.8) lib/phoenix_live_view/controller.ex:39: Phoenix.LiveView.Controller.live_render/3
    (phoenix 1.8.1) lib/phoenix/router.ex:416: Phoenix.Router.__call__/5
    (shard 0.1.0) lib/shard_web/endpoint.ex:1: ShardWeb.Endpoint.plug_builder_call/2
    (shard 0.1.0) deps/plug/lib/plug/debugger.ex:155: ShardWeb.Endpoint."call (overridable 3)"/2

[debug] ** (Ecto.StaleEntryError) attempted to delete a stale struct:

%Shard.Map.Door{__meta__: #Ecto.Schema.Metadata<:loaded, "doors">, id: 335, name: "Locked Dungeon Gate", description: "A heavy iron gate that blocks the entrance to the dungeon. It requires a key to open.", direction: "north", is_locked: true, key_required: "Tutorial Key", door_type: "locked_gate", properties: %{}, new_dungeon: false, from_room_id: 11, from_room: #Ecto.Association.NotLoaded<association :from_room is not loaded>, to_room_id: 10, to_room: #Ecto.Association.NotLoaded<association :to_room is not loaded>, inserted_at: ~U[2025-10-30 01:16:01Z], updated_at: ~U[2025-10-30 01:16:01Z]}

This typically happens when the struct no longer exists in the database or a database trigger/rule has forbidden the action. If stale entries are expected, you may use `:stale_error_field` to convert this into a changeset error, or set `:allow_stale` to true if you would like stale operations to be considered a success (such as a stale deletion)

    (ecto 3.13.2) lib/ecto/repo/schema.ex:1023: Ecto.Repo.Schema.apply/4
    (ecto 3.13.2) lib/ecto/repo/schema.ex:721: anonymous fn/13 in Ecto.Repo.Schema.do_delete/4
    (ecto 3.13.2) lib/ecto/repo/schema.ex:407: Ecto.Repo.Schema.delete!/4
    (shard 0.1.0) lib/shard/repo.ex:2: anonymous fn/1 in Shard.Repo.transaction/2
    (ecto 3.13.2) lib/ecto/repo/transaction.ex:7: anonymous fn/2 in Ecto.Repo.Transaction.transact/4
    (ecto_sql 3.13.2) lib/ecto/adapters/sql.ex:1458: anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4
    (db_connection 2.8.0) lib/db_connection.ex:1753: DBConnection.run_transaction/4
    (shard 0.1.0) lib/shard/items.ex:395: Shard.Items.create_dungeon_door/0
    (shard 0.1.0) lib/shard_web/live/user_live/mud_game_live.ex:298: ShardWeb.MudGameLive.setup_tutorial_door/0
    (shard 0.1.0) lib/shard_web/live/user_live/mud_game_live.ex:275: ShardWeb.MudGameLive.setup_tutorial_content/1
    (shard 0.1.0) lib/shard_web/live/user_live/mud_game_live.ex:26: ShardWeb.MudGameLive.mount/3
    (phoenix_live_view 1.1.8) lib/phoenix_live_view/utils.ex:348: anonymous fn/6 in Phoenix.LiveView.Utils.maybe_call_live_view_mount!/5
    (telemetry 1.3.0) /home/owner/gjbauer-shard/deps/telemetry/src/telemetry.erl:324: :telemetry.span/3
    (phoenix_live_view 1.1.8) lib/phoenix_live_view/static.ex:324: Phoenix.LiveView.Static.call_mount_and_handle_params!/5
    (phoenix_live_view 1.1.8) lib/phoenix_live_view/static.ex:155: Phoenix.LiveView.Static.do_render/4
    (phoenix_live_view 1.1.8) lib/phoenix_live_view/controller.ex:39: Phoenix.LiveView.Controller.live_render/3
    (phoenix 1.8.1) lib/phoenix/router.ex:416: Phoenix.Router.__call__/5
    (shard 0.1.0) lib/shard_web/endpoint.ex:1: ShardWeb.Endpoint.plug_builder_call/2
    (shard 0.1.0) deps/plug/lib/plug/debugger.ex:155: ShardWeb.Endpoint."call (overridable 3)"/2
    (shard 0.1.0) lib/shard_web/endpoint.ex:1: ShardWeb.Endpoint.call/2

[info] GET /play/tutorial_terrain
[debug] Processing with ShardWeb.MudGameLive.__live__/0
  Parameters: %{"character_id" => "1", "character_name" => "player", "map_id" => "tutorial_terrain"}
  Pipelines: [:browser, :require_authenticated_user]
[debug] QUERY OK source="users_tokens" db=2.6ms idle=1454.9ms
SELECT u1."id", u1."email", u1."hashed_password", u1."confirmed_at", u1."admin", u1."inserted_at", u1."updated_at", u0."authenticated_at", u0."inserted_at" FROM "users_tokens" AS u0 INNER JOIN "users" AS u1 ON u1."id" = u0."user_id" WHERE ((u0."token" = $1) AND (u0."context" = $2)) AND (u0."inserted_at" > $3::timestamp + (-(14)::numeric * interval '1 day')) [<<64, 6, 50, 99, 57, 74, 87, 137, 131, 30, 66, 148, 156, 59, 25, 129, 230, 170, 38, 224, 183, 99, 18, 71, 27, 153, 137, 239, 38, 213, 81, 199>>, "session", ~U[2025-10-30 01:16:14.503902Z]]
[90mâ†³ ShardWeb.UserAuth.fetch_current_scope_for_user/2, at: lib/shard_web/user_auth.ex:76[0m
[debug] QUERY OK source="characters" db=0.5ms idle=1461.6ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ Shard.Characters.get_character!/1, at: lib/shard/characters.ex:40[0m
[debug] QUERY OK source="users" db=0.8ms idle=1462.5ms
SELECT u0."id", u0."email", u0."hashed_password", u0."confirmed_at", u0."admin", u0."inserted_at", u0."updated_at", u0."id" FROM "users" AS u0 WHERE (u0."id" = $1) [2]
[90mâ†³ ShardWeb.MudGameLive.get_character_from_params/1, at: lib/shard_web/live/user_live/mud_game_live.ex:245[0m
[debug] QUERY OK source="characters" db=0.3ms idle=1463.8ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:263[0m
[debug] QUERY OK source="hotbar_slots" db=1.1ms queue=0.1ms idle=1464.7ms
SELECT h0."id", h0."slot_number", h0."character_id", h0."item_id", h0."inventory_id", h0."inserted_at", h0."updated_at", h0."character_id" FROM "hotbar_slots" AS h0 WHERE (h0."character_id" = $1) ORDER BY h0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:264[0m
[debug] QUERY OK source="character_inventories" db=1.0ms queue=0.1ms idle=1464.7ms
SELECT c0."id", c0."quantity", c0."slot_position", c0."equipped", c0."equipment_slot", c0."character_id", c0."item_id", c0."inserted_at", c0."updated_at", c0."character_id" FROM "character_inventories" AS c0 WHERE (c0."character_id" = $1) ORDER BY c0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:264[0m
[debug] QUERY OK source="room_items" db=0.3ms idle=1466.3ms
SELECT r0."id", r0."location", r0."quantity", r0."x_position", r0."y_position", r0."respawn_timer", r0."is_permanent", r0."item_id", r0."dropped_by_character_id", r0."inserted_at", r0."updated_at" FROM "room_items" AS r0 INNER JOIN "items" AS i1 ON r0."item_id" = i1."id" WHERE (r0."location" = '0,2,0') AND (i1."name" = 'Tutorial Key') []
[90mâ†³ Shard.Items.create_tutorial_key/0, at: lib/shard/items.ex:342[0m
[debug] QUERY OK source="npcs" db=0.3ms idle=1466.8ms
SELECT n0."id", n0."name", n0."description", n0."level", n0."health", n0."max_health", n0."mana", n0."max_mana", n0."strength", n0."dexterity", n0."intelligence", n0."constitution", n0."experience_reward", n0."gold_reward", n0."npc_type", n0."dialogue", n0."inventory", n0."location_x", n0."location_y", n0."location_z", n0."is_active", n0."respawn_time", n0."last_death_at", n0."faction", n0."aggression_level", n0."movement_pattern", n0."properties", n0."room_id", n0."inserted_at", n0."updated_at" FROM "npcs" AS n0 WHERE (((n0."location_x" = 0) AND (n0."location_y" = 0)) AND (n0."name" = 'Goldie')) []
[90mâ†³ Shard.Npcs.create_tutorial_npc_goldie/0, at: lib/shard/npcs.ex:171[0m
[debug] QUERY OK source="rooms" db=0.3ms idle=23.1ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 2, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="rooms" db=0.9ms idle=19.0ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 1, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="doors" db=0.4ms queue=0.1ms idle=12.0ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE ((d0."from_room_id" = $1) AND (d0."direction" = $2)) [11, "north"]
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:391[0m
[debug] QUERY OK db=1.9ms idle=8.6ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK source="doors" db=0.4ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.2ms
DELETE FROM "doors" WHERE "id" = $1 [338]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.2ms
DELETE FROM "doors" WHERE "id" = $1 [337]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=11.3ms
commit []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK db=0.3ms idle=22.7ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:402[0m
[debug] QUERY OK source="doors" db=2.7ms
INSERT INTO "doors" ("name","description","direction","door_type","from_room_id","is_locked","key_required","to_room_id","properties","new_dungeon","inserted_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) RETURNING "id" ["Locked Dungeon Gate", "A heavy iron gate that blocks the entrance to the dungeon. It requires a key to open.", "north", "locked_gate", 11, true, "Tutorial Key", 10, %{}, false, ~U[2025-10-30 01:16:14Z], ~U[2025-10-30 01:16:14Z]]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.7ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.8ms
INSERT INTO "doors" ("direction","door_type","from_room_id","is_locked","key_required","to_room_id","properties","new_dungeon","inserted_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) RETURNING "id" ["south", "locked_gate", 10, true, "Tutorial Key", 11, %{}, false, ~U[2025-10-30 01:16:14Z], ~U[2025-10-30 01:16:14Z]]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=1.2ms
commit []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:402[0m
[debug] QUERY OK source="monsters" db=0.9ms idle=30.2ms
SELECT m0."id", m0."name", m0."race", m0."health", m0."max_health", m0."attack_damage", m0."potential_loot_drops", m0."xp_amount", m0."level", m0."description", m0."location_id", m0."inserted_at", m0."updated_at" FROM "monsters" AS m0 []
[90mâ†³ Shard.Monsters.list_monsters/0, at: lib/shard/monsters.ex:21[0m
[debug] QUERY OK source="rooms" db=0.6ms idle=29.7ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ ShardWeb.UserLive.MonsterComponents.load_monsters_from_database/2, at: lib/shard_web/live/user_live/monster_components.ex:12[0m
[debug] QUERY OK source="rooms" db=0.8ms idle=30.7ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ anonymous fn/1 in ShardWeb.UserLive.MonsterComponents.load_monsters_from_database/2, at: lib/shard_web/live/user_live/monster_components.ex:20[0m
[debug] QUERY OK source="rooms" db=0.3ms idle=31.2ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [0, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:248[0m
[debug] QUERY OK source="doors" db=0.3ms idle=31.4ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (d0."from_room_id" = $1) [3]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:253[0m
[debug] QUERY OK source="rooms" db=0.6ms idle=33.2ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.6ms idle=32.4ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."from_room_id" FROM "doors" AS d0 WHERE (d0."from_room_id" = ANY($1)) ORDER BY d0."from_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.8ms idle=33.1ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."to_room_id" FROM "doors" AS d0 WHERE (d0."to_room_id" = ANY($1)) ORDER BY d0."to_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=1.1ms idle=17.9ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.8ms idle=11.7ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[9, 10, 8, 11, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=1.2ms idle=10.5ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[10, 9, 11, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[info] Sent 200 in 59ms
[info] CONNECTED TO Phoenix.LiveView.Socket in 49Âµs
  Transport: :websocket
  Serializer: Phoenix.Socket.V2.JSONSerializer
  Parameters: %{"_csrf_token" => "b0QtTAoSBy8vMjEFGR0PNSoiWTkGPRY79soxeFTdZYFGPN9eEPiQwLqN", "_live_referer" => "undefined", "_mount_attempts" => "0", "_mounts" => "0", "_track_static" => %{"0" => "http://localhost:4000/assets/css/app.css", "1" => "http://localhost:4000/assets/js/app.js"}, "vsn" => "2.0.0"}
[debug] MOUNT ShardWeb.MudGameLive
  Parameters: %{"character_id" => "1", "character_name" => "player", "map_id" => "tutorial_terrain"}
  Session: %{"_csrf_token" => "V7B4oTSKukwBIS6Por0hqqgu", "live_socket_id" => "users_sessions:QAYyYzlKV4mDHkKUnDsZgeaqJuC3YxJHG5mJ7ybVUcc=", "user_token" => <<64, 6, 50, 99, 57, 74, 87, 137, 131, 30, 66, 148, 156, 59, 25, 129, 230, 170, 38, 224, 183, 99, 18, 71, 27, 153, 137, 239, 38, 213, 81, 199>>}
[debug] QUERY OK source="users_tokens" db=1.3ms idle=275.3ms
SELECT u1."id", u1."email", u1."hashed_password", u1."confirmed_at", u1."admin", u1."inserted_at", u1."updated_at", u0."authenticated_at", u0."inserted_at" FROM "users_tokens" AS u0 INNER JOIN "users" AS u1 ON u1."id" = u0."user_id" WHERE ((u0."token" = $1) AND (u0."context" = $2)) AND (u0."inserted_at" > $3::timestamp + (-(14)::numeric * interval '1 day')) [<<64, 6, 50, 99, 57, 74, 87, 137, 131, 30, 66, 148, 156, 59, 25, 129, 230, 170, 38, 224, 183, 99, 18, 71, 27, 153, 137, 239, 38, 213, 81, 199>>, "session", ~U[2025-10-30 01:16:14.817712Z]]
[90mâ†³ ShardWeb.UserAuth.get_user_by_token/1, at: lib/shard_web/user_auth.ex:314[0m
[debug] QUERY OK source="characters" db=0.7ms idle=276.2ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ Shard.Characters.get_character!/1, at: lib/shard/characters.ex:40[0m
[debug] QUERY OK source="users" db=0.5ms queue=0.1ms idle=276.5ms
SELECT u0."id", u0."email", u0."hashed_password", u0."confirmed_at", u0."admin", u0."inserted_at", u0."updated_at", u0."id" FROM "users" AS u0 WHERE (u0."id" = $1) [2]
[90mâ†³ ShardWeb.MudGameLive.get_character_from_params/1, at: lib/shard_web/live/user_live/mud_game_live.ex:245[0m
[debug] QUERY OK source="characters" db=0.4ms idle=276.8ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:263[0m
[debug] QUERY OK source="character_inventories" db=0.4ms idle=275.6ms
SELECT c0."id", c0."quantity", c0."slot_position", c0."equipped", c0."equipment_slot", c0."character_id", c0."item_id", c0."inserted_at", c0."updated_at", c0."character_id" FROM "character_inventories" AS c0 WHERE (c0."character_id" = $1) ORDER BY c0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:264[0m
[debug] QUERY OK source="hotbar_slots" db=1.3ms idle=276.8ms
SELECT h0."id", h0."slot_number", h0."character_id", h0."item_id", h0."inventory_id", h0."inserted_at", h0."updated_at", h0."character_id" FROM "hotbar_slots" AS h0 WHERE (h0."character_id" = $1) ORDER BY h0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:264[0m
[debug] QUERY OK source="room_items" db=1.4ms idle=277.3ms
SELECT r0."id", r0."location", r0."quantity", r0."x_position", r0."y_position", r0."respawn_timer", r0."is_permanent", r0."item_id", r0."dropped_by_character_id", r0."inserted_at", r0."updated_at" FROM "room_items" AS r0 INNER JOIN "items" AS i1 ON r0."item_id" = i1."id" WHERE (r0."location" = '0,2,0') AND (i1."name" = 'Tutorial Key') []
[90mâ†³ Shard.Items.create_tutorial_key/0, at: lib/shard/items.ex:342[0m
[debug] QUERY OK source="npcs" db=0.8ms queue=0.3ms idle=277.5ms
SELECT n0."id", n0."name", n0."description", n0."level", n0."health", n0."max_health", n0."mana", n0."max_mana", n0."strength", n0."dexterity", n0."intelligence", n0."constitution", n0."experience_reward", n0."gold_reward", n0."npc_type", n0."dialogue", n0."inventory", n0."location_x", n0."location_y", n0."location_z", n0."is_active", n0."respawn_time", n0."last_death_at", n0."faction", n0."aggression_level", n0."movement_pattern", n0."properties", n0."room_id", n0."inserted_at", n0."updated_at" FROM "npcs" AS n0 WHERE (((n0."location_x" = 0) AND (n0."location_y" = 0)) AND (n0."name" = 'Goldie')) []
[90mâ†³ Shard.Npcs.create_tutorial_npc_goldie/0, at: lib/shard/npcs.ex:171[0m
[debug] QUERY OK source="rooms" db=0.8ms idle=277.2ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 2, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="rooms" db=0.7ms queue=0.1ms idle=278.1ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 1, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="doors" db=0.9ms queue=0.1ms idle=13.4ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE ((d0."from_room_id" = $1) AND (d0."direction" = $2)) [11, "north"]
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:391[0m
[debug] QUERY OK db=2.3ms idle=13.4ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK source="doors" db=0.6ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.8ms
DELETE FROM "doors" WHERE "id" = $1 [340]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=2.6ms
DELETE FROM "doors" WHERE "id" = $1 [339]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=11.4ms
commit []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK db=0.6ms queue=0.5ms idle=33.3ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:402[0m
[debug] QUERY OK source="doors" db=1.1ms
INSERT INTO "doors" ("name","description","direction","door_type","from_room_id","is_locked","key_required","to_room_id","properties","new_dungeon","inserted_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) RETURNING "id" ["Locked Dungeon Gate", "A heavy iron gate that blocks the entrance to the dungeon. It requires a key to open.", "north", "locked_gate", 11, true, "Tutorial Key", 10, %{}, false, ~U[2025-10-30 01:16:14Z], ~U[2025-10-30 01:16:14Z]]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=2.7ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.9ms
INSERT INTO "doors" ("direction","door_type","from_room_id","is_locked","key_required","to_room_id","properties","new_dungeon","inserted_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) RETURNING "id" ["south", "locked_gate", 10, true, "Tutorial Key", 11, %{}, false, ~U[2025-10-30 01:16:14Z], ~U[2025-10-30 01:16:14Z]]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=1.8ms
commit []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:402[0m
[debug] QUERY OK source="monsters" db=1.0ms idle=45.4ms
SELECT m0."id", m0."name", m0."race", m0."health", m0."max_health", m0."attack_damage", m0."potential_loot_drops", m0."xp_amount", m0."level", m0."description", m0."location_id", m0."inserted_at", m0."updated_at" FROM "monsters" AS m0 []
[90mâ†³ Shard.Monsters.list_monsters/0, at: lib/shard/monsters.ex:21[0m
[debug] QUERY OK source="rooms" db=2.1ms queue=0.1ms idle=46.0ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ ShardWeb.UserLive.MonsterComponents.load_monsters_from_database/2, at: lib/shard_web/live/user_live/monster_components.ex:12[0m
[debug] QUERY OK source="rooms" db=0.5ms idle=47.9ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ anonymous fn/1 in ShardWeb.UserLive.MonsterComponents.load_monsters_from_database/2, at: lib/shard_web/live/user_live/monster_components.ex:20[0m
[debug] QUERY OK source="rooms" db=0.4ms idle=46.9ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [0, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:248[0m
[debug] QUERY OK source="doors" db=0.7ms queue=2.1ms idle=46.6ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (d0."from_room_id" = $1) [3]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:253[0m
[debug] Replied in 71ms
[debug] QUERY OK source="rooms" db=0.5ms queue=0.1ms idle=64.4ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=1.2ms queue=0.3ms idle=64.8ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."to_room_id" FROM "doors" AS d0 WHERE (d0."to_room_id" = ANY($1)) ORDER BY d0."to_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=1.5ms queue=0.5ms idle=63.3ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."from_room_id" FROM "doors" AS d0 WHERE (d0."from_room_id" = ANY($1)) ORDER BY d0."from_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=1.2ms queue=1.8ms idle=46.0ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.8ms queue=0.1ms idle=35.8ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[10, 9, 11, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=1.8ms queue=0.1ms idle=37.1ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[9, 10, 8, 11, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] HANDLE EVENT "keypress" in ShardWeb.MudGameLive
  Parameters: %{"key" => "ArrowRight"}
[debug] QUERY OK source="rooms" db=0.5ms idle=1116.3ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [0, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.valid_movement/3, at: lib/shard_web/live/user_live/movement.ex:131[0m
[debug] QUERY OK source="doors" db=0.4ms idle=1116.2ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE ((d0."from_room_id" = $1) AND (d0."direction" = $2)) [3, "east"]
[90mâ†³ ShardWeb.UserLive.Movement.valid_movement/3, at: lib/shard_web/live/user_live/movement.ex:152[0m
Moving through standard door
[debug] QUERY OK source="rooms" db=1.3ms idle=1116.1ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (r0."id" = $1) [6]
[90mâ†³ ShardWeb.UserLive.Movement.valid_movement/3, at: lib/shard_web/live/user_live/movement.ex:169[0m
[debug] QUERY OK source="rooms" db=0.3ms queue=0.1ms idle=1114.8ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [0, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.execute_movement/2, at: lib/shard_web/live/user_live/movement.ex:41[0m
[debug] QUERY OK source="rooms" db=1.0ms idle=1098.7ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [1, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.execute_movement/2, at: lib/shard_web/live/user_live/movement.ex:42[0m
[debug] QUERY OK source="npcs" db=0.7ms idle=1097.7ms
SELECT n0."id", n0."name", n0."description", n0."level", n0."health", n0."max_health", n0."mana", n0."max_mana", n0."strength", n0."dexterity", n0."intelligence", n0."constitution", n0."experience_reward", n0."gold_reward", n0."npc_type", n0."dialogue", n0."inventory", n0."location_x", n0."location_y", n0."location_z", n0."is_active", n0."respawn_time", n0."last_death_at", n0."faction", n0."aggression_level", n0."movement_pattern", n0."properties", n0."room_id", n0."inserted_at", n0."updated_at" FROM "npcs" AS n0 WHERE (((n0."location_x" = $1) AND (n0."location_y" = $2)) AND (n0."is_active" = TRUE)) [1, 0]
[90mâ†³ ShardWeb.UserLive.Movement.execute_movement/2, at: lib/shard_web/live/user_live/movement.ex:45[0m
[debug] QUERY OK source="room_items" db=1.7ms queue=0.1ms idle=1098.1ms
SELECT i1."name", i1."description", i1."item_type", r0."quantity" FROM "room_items" AS r0 INNER JOIN "items" AS i1 ON r0."item_id" = i1."id" WHERE (r0."location" = $1) AND ((i1."is_active" IS NULL) OR (i1."is_active" = TRUE)) ["1,0,0"]
[90mâ†³ ShardWeb.UserLive.Movement.get_items_at_location/3, at: lib/shard_web/live/user_live/movement.ex:294[0m
[debug] QUERY OK source="items" db=2.0ms idle=1096.0ms
SELECT i0."name", i0."description", i0."item_type" FROM "items" AS i0 WHERE (((i0."location" = $1) AND ((i0."map" = $2) OR (i0."map" IS NULL))) AND ((i0."is_active" IS NULL) OR (i0."is_active" = TRUE))) ["1,0,0", "tutorial_terrain"]
[90mâ†³ ShardWeb.UserLive.Movement.get_items_at_location/3, at: lib/shard_web/live/user_live/movement.ex:309[0m
[debug] QUERY OK source="rooms" db=0.4ms idle=1096.1ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [1, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:248[0m
[debug] QUERY OK source="doors" db=1.3ms idle=1095.9ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (d0."from_room_id" = $1) [6]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:253[0m
[debug] Replied in 23ms
[debug] QUERY OK source="rooms" db=0.3ms idle=16.0ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.5ms idle=16.1ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."to_room_id" FROM "doors" AS d0 WHERE (d0."to_room_id" = ANY($1)) ORDER BY d0."to_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.9ms queue=0.1ms idle=14.5ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."from_room_id" FROM "doors" AS d0 WHERE (d0."from_room_id" = ANY($1)) ORDER BY d0."from_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.5ms idle=14.5ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.4ms idle=13.1ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[9, 10, 8, 11, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.6ms idle=14.2ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[10, 9, 11, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] HANDLE EVENT "keypress" in ShardWeb.MudGameLive
  Parameters: %{"key" => "ArrowRight"}
[debug] QUERY OK source="rooms" db=0.5ms queue=0.1ms idle=567.7ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [1, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.valid_movement/3, at: lib/shard_web/live/user_live/movement.ex:131[0m
[debug] QUERY OK source="doors" db=0.6ms idle=566.3ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE ((d0."from_room_id" = $1) AND (d0."direction" = $2)) [6, "east"]
[90mâ†³ ShardWeb.UserLive.Movement.valid_movement/3, at: lib/shard_web/live/user_live/movement.ex:152[0m
Moving through standard door
[debug] QUERY OK source="rooms" db=0.5ms idle=566.5ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ ShardWeb.UserLive.Movement.valid_movement/3, at: lib/shard_web/live/user_live/movement.ex:169[0m
[debug] QUERY OK source="rooms" db=0.3ms idle=566.0ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [1, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.execute_movement/2, at: lib/shard_web/live/user_live/movement.ex:41[0m
[debug] QUERY OK source="rooms" db=0.4ms idle=563.4ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.execute_movement/2, at: lib/shard_web/live/user_live/movement.ex:42[0m
[debug] QUERY OK source="npcs" db=1.1ms idle=563.0ms
SELECT n0."id", n0."name", n0."description", n0."level", n0."health", n0."max_health", n0."mana", n0."max_mana", n0."strength", n0."dexterity", n0."intelligence", n0."constitution", n0."experience_reward", n0."gold_reward", n0."npc_type", n0."dialogue", n0."inventory", n0."location_x", n0."location_y", n0."location_z", n0."is_active", n0."respawn_time", n0."last_death_at", n0."faction", n0."aggression_level", n0."movement_pattern", n0."properties", n0."room_id", n0."inserted_at", n0."updated_at" FROM "npcs" AS n0 WHERE (((n0."location_x" = $1) AND (n0."location_y" = $2)) AND (n0."is_active" = TRUE)) [2, 0]
[90mâ†³ ShardWeb.UserLive.Movement.execute_movement/2, at: lib/shard_web/live/user_live/movement.ex:45[0m
[debug] QUERY OK source="room_items" db=0.5ms idle=563.9ms
SELECT i1."name", i1."description", i1."item_type", r0."quantity" FROM "room_items" AS r0 INNER JOIN "items" AS i1 ON r0."item_id" = i1."id" WHERE (r0."location" = $1) AND ((i1."is_active" IS NULL) OR (i1."is_active" = TRUE)) ["2,0,0"]
[90mâ†³ ShardWeb.UserLive.Movement.get_items_at_location/3, at: lib/shard_web/live/user_live/movement.ex:294[0m
[debug] QUERY OK source="items" db=0.6ms idle=563.6ms
SELECT i0."name", i0."description", i0."item_type" FROM "items" AS i0 WHERE (((i0."location" = $1) AND ((i0."map" = $2) OR (i0."map" IS NULL))) AND ((i0."is_active" IS NULL) OR (i0."is_active" = TRUE))) ["2,0,0", "tutorial_terrain"]
[90mâ†³ ShardWeb.UserLive.Movement.get_items_at_location/3, at: lib/shard_web/live/user_live/movement.ex:309[0m
[debug] QUERY OK source="rooms" db=0.3ms queue=0.1ms idle=563.5ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:248[0m
[debug] QUERY OK source="doors" db=0.5ms idle=564.0ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (d0."from_room_id" = $1) [9]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:253[0m
[debug] Replied in 8ms
[debug] QUERY OK source="rooms" db=0.7ms idle=8.0ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.4ms idle=7.3ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."from_room_id" FROM "doors" AS d0 WHERE (d0."from_room_id" = ANY($1)) ORDER BY d0."from_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.7ms idle=8.1ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."to_room_id" FROM "doors" AS d0 WHERE (d0."to_room_id" = ANY($1)) ORDER BY d0."to_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.2ms idle=7.6ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.4ms idle=7.6ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[9, 10, 8, 11, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.6ms idle=6.3ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[10, 9, 11, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_handlers.ex
Done in 2ms
Done in 383Âµs
[debug] Live reload: lib/shard_web/live/user_live/mud_game_live.ex
[debug] Live reload: lib/shard_web/live/user_live/mud_game_live.ex
Done in 1ms
Compiling 2 files (.ex)
Generated shard app
[info] GET /play/tutorial_terrain
[debug] Processing with ShardWeb.MudGameLive.__live__/0
  Parameters: %{"character_id" => "1", "character_name" => "player", "map_id" => "tutorial_terrain"}
  Pipelines: [:browser, :require_authenticated_user]
[debug] QUERY OK source="users_tokens" db=3.2ms idle=594.6ms
SELECT u1."id", u1."email", u1."hashed_password", u1."confirmed_at", u1."admin", u1."inserted_at", u1."updated_at", u0."authenticated_at", u0."inserted_at" FROM "users_tokens" AS u0 INNER JOIN "users" AS u1 ON u1."id" = u0."user_id" WHERE ((u0."token" = $1) AND (u0."context" = $2)) AND (u0."inserted_at" > $3::timestamp + (-(14)::numeric * interval '1 day')) [<<64, 6, 50, 99, 57, 74, 87, 137, 131, 30, 66, 148, 156, 59, 25, 129, 230, 170, 38, 224, 183, 99, 18, 71, 27, 153, 137, 239, 38, 213, 81, 199>>, "session", ~U[2025-10-30 01:16:26.640667Z]]
[90mâ†³ ShardWeb.UserAuth.fetch_current_scope_for_user/2, at: lib/shard_web/user_auth.ex:76[0m
[debug] QUERY OK source="characters" db=0.4ms queue=0.1ms idle=598.3ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ Shard.Characters.get_character!/1, at: lib/shard/characters.ex:40[0m
[debug] QUERY OK source="users" db=0.5ms idle=599.1ms
SELECT u0."id", u0."email", u0."hashed_password", u0."confirmed_at", u0."admin", u0."inserted_at", u0."updated_at", u0."id" FROM "users" AS u0 WHERE (u0."id" = $1) [2]
[90mâ†³ ShardWeb.MudGameLive.get_character_from_params/1, at: lib/shard_web/live/user_live/mud_game_live.ex:261[0m
[debug] QUERY OK source="characters" db=0.3ms idle=599.9ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:279[0m
[debug] QUERY OK source="character_inventories" db=0.5ms queue=0.1ms idle=600.5ms
SELECT c0."id", c0."quantity", c0."slot_position", c0."equipped", c0."equipment_slot", c0."character_id", c0."item_id", c0."inserted_at", c0."updated_at", c0."character_id" FROM "character_inventories" AS c0 WHERE (c0."character_id" = $1) ORDER BY c0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:280[0m
[debug] QUERY OK source="hotbar_slots" db=1.5ms idle=600.5ms
SELECT h0."id", h0."slot_number", h0."character_id", h0."item_id", h0."inventory_id", h0."inserted_at", h0."updated_at", h0."character_id" FROM "hotbar_slots" AS h0 WHERE (h0."character_id" = $1) ORDER BY h0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:280[0m
[debug] QUERY OK source="room_items" db=0.8ms idle=602.3ms
SELECT r0."id", r0."location", r0."quantity", r0."x_position", r0."y_position", r0."respawn_timer", r0."is_permanent", r0."item_id", r0."dropped_by_character_id", r0."inserted_at", r0."updated_at" FROM "room_items" AS r0 INNER JOIN "items" AS i1 ON r0."item_id" = i1."id" WHERE (r0."location" = '0,2,0') AND (i1."name" = 'Tutorial Key') []
[90mâ†³ Shard.Items.create_tutorial_key/0, at: lib/shard/items.ex:342[0m
[debug] QUERY OK source="npcs" db=0.3ms queue=0.1ms idle=603.4ms
SELECT n0."id", n0."name", n0."description", n0."level", n0."health", n0."max_health", n0."mana", n0."max_mana", n0."strength", n0."dexterity", n0."intelligence", n0."constitution", n0."experience_reward", n0."gold_reward", n0."npc_type", n0."dialogue", n0."inventory", n0."location_x", n0."location_y", n0."location_z", n0."is_active", n0."respawn_time", n0."last_death_at", n0."faction", n0."aggression_level", n0."movement_pattern", n0."properties", n0."room_id", n0."inserted_at", n0."updated_at" FROM "npcs" AS n0 WHERE (((n0."location_x" = 0) AND (n0."location_y" = 0)) AND (n0."name" = 'Goldie')) []
[90mâ†³ Shard.Npcs.create_tutorial_npc_goldie/0, at: lib/shard/npcs.ex:171[0m
[debug] QUERY OK source="rooms" db=0.6ms queue=0.1ms idle=36.3ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 2, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="rooms" db=0.5ms idle=32.6ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 1, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="doors" db=0.4ms queue=0.3ms idle=8.3ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE ((d0."from_room_id" = $1) AND (d0."direction" = $2)) [11, "north"]
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:391[0m
[debug] QUERY OK db=0.1ms queue=0.2ms idle=8.2ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK source="doors" db=0.9ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.4ms
DELETE FROM "doors" WHERE "id" = $1 [342]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.5ms
DELETE FROM "doors" WHERE "id" = $1 [341]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=12.8ms
commit []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK db=0.1ms idle=23.5ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:402[0m
[debug] QUERY OK source="doors" db=0.5ms
INSERT INTO "doors" ("name","description","direction","door_type","from_room_id","is_locked","key_required","to_room_id","properties","new_dungeon","inserted_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) RETURNING "id" ["Locked Dungeon Gate", "A heavy iron gate that blocks the entrance to the dungeon. It requires a key to open.", "north", "locked_gate", 11, true, "Tutorial Key", 10, %{}, false, ~U[2025-10-30 01:16:26Z], ~U[2025-10-30 01:16:26Z]]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=1.0ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.3ms
INSERT INTO "doors" ("direction","door_type","from_room_id","is_locked","key_required","to_room_id","properties","new_dungeon","inserted_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) RETURNING "id" ["south", "locked_gate", 10, true, "Tutorial Key", 11, %{}, false, ~U[2025-10-30 01:16:26Z], ~U[2025-10-30 01:16:26Z]]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=1.1ms
commit []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:402[0m
[debug] QUERY OK source="monsters" db=0.3ms idle=27.9ms
SELECT m0."id", m0."name", m0."race", m0."health", m0."max_health", m0."attack_damage", m0."potential_loot_drops", m0."xp_amount", m0."level", m0."description", m0."location_id", m0."inserted_at", m0."updated_at" FROM "monsters" AS m0 []
[90mâ†³ Shard.Monsters.list_monsters/0, at: lib/shard/monsters.ex:21[0m
[debug] QUERY OK source="rooms" db=0.3ms idle=27.8ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ ShardWeb.UserLive.MonsterComponents.load_monsters_from_database/2, at: lib/shard_web/live/user_live/monster_components.ex:12[0m
[debug] QUERY OK source="rooms" db=0.8ms queue=1.2ms idle=27.5ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ anonymous fn/1 in ShardWeb.UserLive.MonsterComponents.load_monsters_from_database/2, at: lib/shard_web/live/user_live/monster_components.ex:20[0m
[debug] QUERY OK source="rooms" db=0.7ms idle=28.9ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [0, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:248[0m
[debug] QUERY OK source="doors" db=0.5ms idle=29.4ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (d0."from_room_id" = $1) [3]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:253[0m
[debug] QUERY OK source="rooms" db=3.9ms idle=37.0ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=1.1ms idle=41.1ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."to_room_id" FROM "doors" AS d0 WHERE (d0."to_room_id" = ANY($1)) ORDER BY d0."to_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=1.3ms idle=40.1ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."from_room_id" FROM "doors" AS d0 WHERE (d0."from_room_id" = ANY($1)) ORDER BY d0."from_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.8ms idle=25.9ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.8ms queue=0.1ms idle=22.6ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[9, 10, 8, 11, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=1.5ms queue=0.2ms idle=22.0ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[10, 9, 11, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[info] Sent 200 in 79ms
[info] GET /play/tutorial_terrain
[info] GET /play/tutorial_terrain
[debug] Processing with ShardWeb.MudGameLive.__live__/0
  Parameters: %{"character_id" => "1", "character_name" => "player", "map_id" => "tutorial_terrain"}
  Pipelines: [:browser, :require_authenticated_user]
[debug] Processing with ShardWeb.MudGameLive.__live__/0
  Parameters: %{"character_id" => "1", "character_name" => "player", "map_id" => "tutorial_terrain"}
  Pipelines: [:browser, :require_authenticated_user]
[debug] QUERY OK source="users_tokens" db=0.9ms idle=97.4ms
SELECT u1."id", u1."email", u1."hashed_password", u1."confirmed_at", u1."admin", u1."inserted_at", u1."updated_at", u0."authenticated_at", u0."inserted_at" FROM "users_tokens" AS u0 INNER JOIN "users" AS u1 ON u1."id" = u0."user_id" WHERE ((u0."token" = $1) AND (u0."context" = $2)) AND (u0."inserted_at" > $3::timestamp + (-(14)::numeric * interval '1 day')) [<<64, 6, 50, 99, 57, 74, 87, 137, 131, 30, 66, 148, 156, 59, 25, 129, 230, 170, 38, 224, 183, 99, 18, 71, 27, 153, 137, 239, 38, 213, 81, 199>>, "session", ~U[2025-10-30 01:16:26.792194Z]]
[90mâ†³ ShardWeb.UserAuth.fetch_current_scope_for_user/2, at: lib/shard_web/user_auth.ex:76[0m
[debug] QUERY OK source="users_tokens" db=2.6ms idle=96.1ms
SELECT u1."id", u1."email", u1."hashed_password", u1."confirmed_at", u1."admin", u1."inserted_at", u1."updated_at", u0."authenticated_at", u0."inserted_at" FROM "users_tokens" AS u0 INNER JOIN "users" AS u1 ON u1."id" = u0."user_id" WHERE ((u0."token" = $1) AND (u0."context" = $2)) AND (u0."inserted_at" > $3::timestamp + (-(14)::numeric * interval '1 day')) [<<64, 6, 50, 99, 57, 74, 87, 137, 131, 30, 66, 148, 156, 59, 25, 129, 230, 170, 38, 224, 183, 99, 18, 71, 27, 153, 137, 239, 38, 213, 81, 199>>, "session", ~U[2025-10-30 01:16:26.793046Z]]
[90mâ†³ ShardWeb.UserAuth.fetch_current_scope_for_user/2, at: lib/shard_web/user_auth.ex:76[0m
[debug] QUERY OK source="characters" db=0.4ms idle=100.3ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ Shard.Characters.get_character!/1, at: lib/shard/characters.ex:40[0m
[debug] QUERY OK source="characters" db=0.4ms idle=101.7ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ Shard.Characters.get_character!/1, at: lib/shard/characters.ex:40[0m
[debug] QUERY OK source="users" db=0.3ms queue=0.2ms idle=99.3ms
SELECT u0."id", u0."email", u0."hashed_password", u0."confirmed_at", u0."admin", u0."inserted_at", u0."updated_at", u0."id" FROM "users" AS u0 WHERE (u0."id" = $1) [2]
[90mâ†³ ShardWeb.MudGameLive.get_character_from_params/1, at: lib/shard_web/live/user_live/mud_game_live.ex:261[0m
[debug] QUERY OK source="users" db=0.6ms queue=0.2ms idle=98.5ms
SELECT u0."id", u0."email", u0."hashed_password", u0."confirmed_at", u0."admin", u0."inserted_at", u0."updated_at", u0."id" FROM "users" AS u0 WHERE (u0."id" = $1) [2]
[90mâ†³ ShardWeb.MudGameLive.get_character_from_params/1, at: lib/shard_web/live/user_live/mud_game_live.ex:261[0m
[debug] QUERY OK source="characters" db=0.4ms idle=37.4ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:279[0m
[debug] QUERY OK source="characters" db=0.4ms queue=0.2ms idle=37.5ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:279[0m
[debug] QUERY OK source="hotbar_slots" db=0.3ms idle=8.8ms
SELECT h0."id", h0."slot_number", h0."character_id", h0."item_id", h0."inventory_id", h0."inserted_at", h0."updated_at", h0."character_id" FROM "hotbar_slots" AS h0 WHERE (h0."character_id" = $1) ORDER BY h0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:280[0m
[debug] QUERY OK source="character_inventories" db=0.4ms idle=6.4ms
SELECT c0."id", c0."quantity", c0."slot_position", c0."equipped", c0."equipment_slot", c0."character_id", c0."item_id", c0."inserted_at", c0."updated_at", c0."character_id" FROM "character_inventories" AS c0 WHERE (c0."character_id" = $1) ORDER BY c0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:280[0m
[debug] QUERY OK source="character_inventories" db=0.3ms idle=31.8ms
SELECT c0."id", c0."quantity", c0."slot_position", c0."equipped", c0."equipment_slot", c0."character_id", c0."item_id", c0."inserted_at", c0."updated_at", c0."character_id" FROM "character_inventories" AS c0 WHERE (c0."character_id" = $1) ORDER BY c0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:280[0m
[debug] QUERY OK source="hotbar_slots" db=1.2ms idle=30.7ms
SELECT h0."id", h0."slot_number", h0."character_id", h0."item_id", h0."inventory_id", h0."inserted_at", h0."updated_at", h0."character_id" FROM "hotbar_slots" AS h0 WHERE (h0."character_id" = $1) ORDER BY h0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:280[0m
[debug] QUERY OK source="room_items" db=1.0ms idle=3.7ms
SELECT r0."id", r0."location", r0."quantity", r0."x_position", r0."y_position", r0."respawn_timer", r0."is_permanent", r0."item_id", r0."dropped_by_character_id", r0."inserted_at", r0."updated_at" FROM "room_items" AS r0 INNER JOIN "items" AS i1 ON r0."item_id" = i1."id" WHERE (r0."location" = '0,2,0') AND (i1."name" = 'Tutorial Key') []
[90mâ†³ Shard.Items.create_tutorial_key/0, at: lib/shard/items.ex:342[0m
[debug] QUERY OK source="room_items" db=0.6ms idle=4.1ms
SELECT r0."id", r0."location", r0."quantity", r0."x_position", r0."y_position", r0."respawn_timer", r0."is_permanent", r0."item_id", r0."dropped_by_character_id", r0."inserted_at", r0."updated_at" FROM "room_items" AS r0 INNER JOIN "items" AS i1 ON r0."item_id" = i1."id" WHERE (r0."location" = '0,2,0') AND (i1."name" = 'Tutorial Key') []
[90mâ†³ Shard.Items.create_tutorial_key/0, at: lib/shard/items.ex:342[0m
[debug] QUERY OK source="npcs" db=0.3ms idle=4.0ms
SELECT n0."id", n0."name", n0."description", n0."level", n0."health", n0."max_health", n0."mana", n0."max_mana", n0."strength", n0."dexterity", n0."intelligence", n0."constitution", n0."experience_reward", n0."gold_reward", n0."npc_type", n0."dialogue", n0."inventory", n0."location_x", n0."location_y", n0."location_z", n0."is_active", n0."respawn_time", n0."last_death_at", n0."faction", n0."aggression_level", n0."movement_pattern", n0."properties", n0."room_id", n0."inserted_at", n0."updated_at" FROM "npcs" AS n0 WHERE (((n0."location_x" = 0) AND (n0."location_y" = 0)) AND (n0."name" = 'Goldie')) []
[90mâ†³ Shard.Npcs.create_tutorial_npc_goldie/0, at: lib/shard/npcs.ex:171[0m
[debug] QUERY OK source="npcs" db=0.4ms idle=3.8ms
SELECT n0."id", n0."name", n0."description", n0."level", n0."health", n0."max_health", n0."mana", n0."max_mana", n0."strength", n0."dexterity", n0."intelligence", n0."constitution", n0."experience_reward", n0."gold_reward", n0."npc_type", n0."dialogue", n0."inventory", n0."location_x", n0."location_y", n0."location_z", n0."is_active", n0."respawn_time", n0."last_death_at", n0."faction", n0."aggression_level", n0."movement_pattern", n0."properties", n0."room_id", n0."inserted_at", n0."updated_at" FROM "npcs" AS n0 WHERE (((n0."location_x" = 0) AND (n0."location_y" = 0)) AND (n0."name" = 'Goldie')) []
[90mâ†³ Shard.Npcs.create_tutorial_npc_goldie/0, at: lib/shard/npcs.ex:171[0m
[debug] QUERY OK source="rooms" db=0.3ms idle=3.6ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 2, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="rooms" db=0.4ms idle=3.7ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 2, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="rooms" db=0.2ms idle=3.2ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 1, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="rooms" db=0.3ms idle=3.4ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 1, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="doors" db=0.7ms idle=3.4ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE ((d0."from_room_id" = $1) AND (d0."direction" = $2)) [11, "north"]
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:391[0m
[debug] QUERY OK db=0.1ms idle=2.7ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK source="doors" db=0.3ms idle=3.4ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE ((d0."from_room_id" = $1) AND (d0."direction" = $2)) [11, "north"]
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:391[0m
[debug] QUERY OK source="doors" db=0.2ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=0.3ms idle=3.0ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK source="doors" db=0.2ms
DELETE FROM "doors" WHERE "id" = $1 [344]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.3ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=1.0ms
DELETE FROM "doors" WHERE "id" = $1 [343]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=10.3ms
commit []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK source="doors" db=11.1ms
DELETE FROM "doors" WHERE "id" = $1 [344]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=0.2ms idle=15.3ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:402[0m
[debug] QUERY OK db=0.9ms
rollback []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK source="doors" db=0.5ms
INSERT INTO "doors" ("name","description","direction","door_type","from_room_id","is_locked","key_required","to_room_id","properties","new_dungeon","inserted_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) RETURNING "id" ["Locked Dungeon Gate", "A heavy iron gate that blocks the entrance to the dungeon. It requires a key to open.", "north", "locked_gate", 11, true, "Tutorial Key", 10, %{}, false, ~U[2025-10-30 01:16:26Z], ~U[2025-10-30 01:16:26Z]]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.3ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.4ms
INSERT INTO "doors" ("direction","door_type","from_room_id","is_locked","key_required","to_room_id","properties","new_dungeon","inserted_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) RETURNING "id" ["south", "locked_gate", 10, true, "Tutorial Key", 11, %{}, false, ~U[2025-10-30 01:16:26Z], ~U[2025-10-30 01:16:26Z]]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=1.8ms
commit []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:402[0m
[debug] QUERY OK source="monsters" db=1.6ms idle=20.7ms
SELECT m0."id", m0."name", m0."race", m0."health", m0."max_health", m0."attack_damage", m0."potential_loot_drops", m0."xp_amount", m0."level", m0."description", m0."location_id", m0."inserted_at", m0."updated_at" FROM "monsters" AS m0 []
[90mâ†³ Shard.Monsters.list_monsters/0, at: lib/shard/monsters.ex:21[0m
[debug] QUERY OK source="rooms" db=0.6ms idle=22.9ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ ShardWeb.UserLive.MonsterComponents.load_monsters_from_database/2, at: lib/shard_web/live/user_live/monster_components.ex:12[0m
[debug] QUERY OK source="rooms" db=0.8ms idle=23.7ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ anonymous fn/1 in ShardWeb.UserLive.MonsterComponents.load_monsters_from_database/2, at: lib/shard_web/live/user_live/monster_components.ex:20[0m
[debug] QUERY OK source="rooms" db=0.5ms idle=25.0ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [0, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:248[0m
[debug] QUERY OK source="doors" db=0.5ms idle=25.3ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (d0."from_room_id" = $1) [3]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:253[0m
[debug] QUERY OK source="rooms" db=0.5ms idle=29.4ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.8ms idle=30.6ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."to_room_id" FROM "doors" AS d0 WHERE (d0."to_room_id" = ANY($1)) ORDER BY d0."to_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.8ms queue=0.2ms idle=18.1ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."from_room_id" FROM "doors" AS d0 WHERE (d0."from_room_id" = ANY($1)) ORDER BY d0."from_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.5ms idle=17.8ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.5ms queue=0.1ms idle=15.1ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[9, 10, 8, 11, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.6ms idle=13.2ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[10, 9, 11, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[info] Sent 200 in 62ms
[info] Sent 409 in 81ms
[debug] ** (Ecto.StaleEntryError) attempted to delete a stale struct:

%Shard.Map.Door{__meta__: #Ecto.Schema.Metadata<:loaded, "doors">, id: 344, name: nil, description: nil, direction: "south", is_locked: true, key_required: "Tutorial Key", door_type: "locked_gate", properties: %{}, new_dungeon: false, from_room_id: 10, from_room: #Ecto.Association.NotLoaded<association :from_room is not loaded>, to_room_id: 11, to_room: #Ecto.Association.NotLoaded<association :to_room is not loaded>, inserted_at: ~U[2025-10-30 01:16:26Z], updated_at: ~U[2025-10-30 01:16:26Z]}

This typically happens when the struct no longer exists in the database or a database trigger/rule has forbidden the action. If stale entries are expected, you may use `:stale_error_field` to convert this into a changeset error, or set `:allow_stale` to true if you would like stale operations to be considered a success (such as a stale deletion)

    (ecto 3.13.2) lib/ecto/repo/schema.ex:1023: Ecto.Repo.Schema.apply/4
    (ecto 3.13.2) lib/ecto/repo/schema.ex:721: anonymous fn/13 in Ecto.Repo.Schema.do_delete/4
    (ecto 3.13.2) lib/ecto/repo/schema.ex:407: Ecto.Repo.Schema.delete!/4
    (shard 0.1.0) lib/shard/map.ex:162: anonymous fn/1 in Shard.Map.delete_door/1
    (shard 0.1.0) lib/shard/repo.ex:2: anonymous fn/1 in Shard.Repo.transaction/2
    (ecto 3.13.2) lib/ecto/repo/transaction.ex:7: anonymous fn/2 in Ecto.Repo.Transaction.transact/4
    (ecto_sql 3.13.2) lib/ecto/adapters/sql.ex:1458: anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4
    (db_connection 2.8.0) lib/db_connection.ex:1753: DBConnection.run_transaction/4
    (shard 0.1.0) lib/shard/items.ex:395: Shard.Items.create_dungeon_door/0
    (shard 0.1.0) lib/shard_web/live/user_live/mud_game_live.ex:314: ShardWeb.MudGameLive.setup_tutorial_door/0
    (shard 0.1.0) lib/shard_web/live/user_live/mud_game_live.ex:291: ShardWeb.MudGameLive.setup_tutorial_content/1
    (shard 0.1.0) lib/shard_web/live/user_live/mud_game_live.ex:26: ShardWeb.MudGameLive.mount/3
    (phoenix_live_view 1.1.8) lib/phoenix_live_view/utils.ex:348: anonymous fn/6 in Phoenix.LiveView.Utils.maybe_call_live_view_mount!/5
    (telemetry 1.3.0) /home/owner/gjbauer-shard/deps/telemetry/src/telemetry.erl:324: :telemetry.span/3
    (phoenix_live_view 1.1.8) lib/phoenix_live_view/static.ex:324: Phoenix.LiveView.Static.call_mount_and_handle_params!/5
    (phoenix_live_view 1.1.8) lib/phoenix_live_view/static.ex:155: Phoenix.LiveView.Static.do_render/4
    (phoenix_live_view 1.1.8) lib/phoenix_live_view/controller.ex:39: Phoenix.LiveView.Controller.live_render/3
    (phoenix 1.8.1) lib/phoenix/router.ex:416: Phoenix.Router.__call__/5
    (shard 0.1.0) lib/shard_web/endpoint.ex:1: ShardWeb.Endpoint.plug_builder_call/2
    (shard 0.1.0) deps/plug/lib/plug/debugger.ex:155: ShardWeb.Endpoint."call (overridable 3)"/2

[info] GET /play/tutorial_terrain
[debug] Processing with ShardWeb.MudGameLive.__live__/0
  Parameters: %{"character_id" => "1", "character_name" => "player", "map_id" => "tutorial_terrain"}
  Pipelines: [:browser, :require_authenticated_user]
[debug] QUERY OK source="users_tokens" db=0.5ms idle=1279.3ms
SELECT u1."id", u1."email", u1."hashed_password", u1."confirmed_at", u1."admin", u1."inserted_at", u1."updated_at", u0."authenticated_at", u0."inserted_at" FROM "users_tokens" AS u0 INNER JOIN "users" AS u1 ON u1."id" = u0."user_id" WHERE ((u0."token" = $1) AND (u0."context" = $2)) AND (u0."inserted_at" > $3::timestamp + (-(14)::numeric * interval '1 day')) [<<64, 6, 50, 99, 57, 74, 87, 137, 131, 30, 66, 148, 156, 59, 25, 129, 230, 170, 38, 224, 183, 99, 18, 71, 27, 153, 137, 239, 38, 213, 81, 199>>, "session", ~U[2025-10-30 01:16:39.331468Z]]
[90mâ†³ ShardWeb.UserAuth.fetch_current_scope_for_user/2, at: lib/shard_web/user_auth.ex:76[0m
[debug] QUERY OK source="characters" db=0.3ms idle=1282.3ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ Shard.Characters.get_character!/1, at: lib/shard/characters.ex:40[0m
[debug] QUERY OK source="users" db=0.3ms idle=1282.8ms
SELECT u0."id", u0."email", u0."hashed_password", u0."confirmed_at", u0."admin", u0."inserted_at", u0."updated_at", u0."id" FROM "users" AS u0 WHERE (u0."id" = $1) [2]
[90mâ†³ ShardWeb.MudGameLive.get_character_from_params/1, at: lib/shard_web/live/user_live/mud_game_live.ex:261[0m
[debug] QUERY OK source="characters" db=0.6ms idle=1283.6ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:279[0m
[debug] QUERY OK source="hotbar_slots" db=0.3ms idle=1284.6ms
SELECT h0."id", h0."slot_number", h0."character_id", h0."item_id", h0."inventory_id", h0."inserted_at", h0."updated_at", h0."character_id" FROM "hotbar_slots" AS h0 WHERE (h0."character_id" = $1) ORDER BY h0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:280[0m
[debug] QUERY OK source="character_inventories" db=0.2ms idle=1284.5ms
SELECT c0."id", c0."quantity", c0."slot_position", c0."equipped", c0."equipment_slot", c0."character_id", c0."item_id", c0."inserted_at", c0."updated_at", c0."character_id" FROM "character_inventories" AS c0 WHERE (c0."character_id" = $1) ORDER BY c0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:280[0m
[debug] QUERY OK source="room_items" db=0.2ms idle=1285.0ms
SELECT r0."id", r0."location", r0."quantity", r0."x_position", r0."y_position", r0."respawn_timer", r0."is_permanent", r0."item_id", r0."dropped_by_character_id", r0."inserted_at", r0."updated_at" FROM "room_items" AS r0 INNER JOIN "items" AS i1 ON r0."item_id" = i1."id" WHERE (r0."location" = '0,2,0') AND (i1."name" = 'Tutorial Key') []
[90mâ†³ Shard.Items.create_tutorial_key/0, at: lib/shard/items.ex:342[0m
[debug] QUERY OK source="npcs" db=1.0ms idle=1285.2ms
SELECT n0."id", n0."name", n0."description", n0."level", n0."health", n0."max_health", n0."mana", n0."max_mana", n0."strength", n0."dexterity", n0."intelligence", n0."constitution", n0."experience_reward", n0."gold_reward", n0."npc_type", n0."dialogue", n0."inventory", n0."location_x", n0."location_y", n0."location_z", n0."is_active", n0."respawn_time", n0."last_death_at", n0."faction", n0."aggression_level", n0."movement_pattern", n0."properties", n0."room_id", n0."inserted_at", n0."updated_at" FROM "npcs" AS n0 WHERE (((n0."location_x" = 0) AND (n0."location_y" = 0)) AND (n0."name" = 'Goldie')) []
[90mâ†³ Shard.Npcs.create_tutorial_npc_goldie/0, at: lib/shard/npcs.ex:171[0m
[debug] QUERY OK source="rooms" db=0.2ms idle=17.3ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 2, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="rooms" db=0.3ms idle=12.7ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 1, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="doors" db=0.4ms idle=8.2ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE ((d0."from_room_id" = $1) AND (d0."direction" = $2)) [11, "north"]
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:391[0m
[debug] QUERY OK db=0.1ms idle=6.0ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK source="doors" db=0.4ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.2ms
DELETE FROM "doors" WHERE "id" = $1 [346]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.1ms
DELETE FROM "doors" WHERE "id" = $1 [345]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=1.2ms
commit []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK db=0.1ms idle=8.4ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:402[0m
[debug] QUERY OK source="doors" db=0.4ms
INSERT INTO "doors" ("name","description","direction","door_type","from_room_id","is_locked","key_required","to_room_id","properties","new_dungeon","inserted_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) RETURNING "id" ["Locked Dungeon Gate", "A heavy iron gate that blocks the entrance to the dungeon. It requires a key to open.", "north", "locked_gate", 11, true, "Tutorial Key", 10, %{}, false, ~U[2025-10-30 01:16:39Z], ~U[2025-10-30 01:16:39Z]]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.3ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.3ms
INSERT INTO "doors" ("direction","door_type","from_room_id","is_locked","key_required","to_room_id","properties","new_dungeon","inserted_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) RETURNING "id" ["south", "locked_gate", 10, true, "Tutorial Key", 11, %{}, false, ~U[2025-10-30 01:16:39Z], ~U[2025-10-30 01:16:39Z]]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=1.1ms
commit []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:402[0m
[debug] QUERY OK source="monsters" db=0.2ms idle=11.0ms
SELECT m0."id", m0."name", m0."race", m0."health", m0."max_health", m0."attack_damage", m0."potential_loot_drops", m0."xp_amount", m0."level", m0."description", m0."location_id", m0."inserted_at", m0."updated_at" FROM "monsters" AS m0 []
[90mâ†³ Shard.Monsters.list_monsters/0, at: lib/shard/monsters.ex:21[0m
[debug] QUERY OK source="rooms" db=0.4ms idle=10.8ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ ShardWeb.UserLive.MonsterComponents.load_monsters_from_database/2, at: lib/shard_web/live/user_live/monster_components.ex:12[0m
[debug] QUERY OK source="rooms" db=0.2ms idle=11.4ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ anonymous fn/1 in ShardWeb.UserLive.MonsterComponents.load_monsters_from_database/2, at: lib/shard_web/live/user_live/monster_components.ex:20[0m
[debug] QUERY OK source="rooms" db=0.2ms idle=11.3ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [0, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:248[0m
[debug] QUERY OK source="doors" db=0.8ms queue=0.4ms idle=10.6ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (d0."from_room_id" = $1) [3]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:253[0m
[debug] QUERY OK source="rooms" db=0.8ms idle=13.9ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.8ms idle=14.0ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."from_room_id" FROM "doors" AS d0 WHERE (d0."from_room_id" = ANY($1)) ORDER BY d0."from_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=1.1ms idle=14.9ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."to_room_id" FROM "doors" AS d0 WHERE (d0."to_room_id" = ANY($1)) ORDER BY d0."to_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.4ms idle=12.4ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.3ms idle=9.6ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[9, 10, 8, 11, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.5ms idle=9.2ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[10, 9, 11, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[info] Sent 200 in 30ms
[info] CONNECTED TO Phoenix.LiveView.Socket in 71Âµs
  Transport: :websocket
  Serializer: Phoenix.Socket.V2.JSONSerializer
  Parameters: %{"_csrf_token" => "MH4FRFkXCiIFITUSBBJVJjwrciwdBQQWfIGp6CYipJBPMAcvSYBDltcc", "_live_referer" => "undefined", "_mount_attempts" => "0", "_mounts" => "0", "_track_static" => %{"0" => "http://localhost:4000/assets/css/app.css", "1" => "http://localhost:4000/assets/js/app.js"}, "vsn" => "2.0.0"}
[debug] MOUNT ShardWeb.MudGameLive
  Parameters: %{"character_id" => "1", "character_name" => "player", "map_id" => "tutorial_terrain"}
  Session: %{"_csrf_token" => "V7B4oTSKukwBIS6Por0hqqgu", "live_socket_id" => "users_sessions:QAYyYzlKV4mDHkKUnDsZgeaqJuC3YxJHG5mJ7ybVUcc=", "user_token" => <<64, 6, 50, 99, 57, 74, 87, 137, 131, 30, 66, 148, 156, 59, 25, 129, 230, 170, 38, 224, 183, 99, 18, 71, 27, 153, 137, 239, 38, 213, 81, 199>>}
[debug] QUERY OK source="users_tokens" db=1.4ms queue=0.1ms idle=296.1ms
SELECT u1."id", u1."email", u1."hashed_password", u1."confirmed_at", u1."admin", u1."inserted_at", u1."updated_at", u0."authenticated_at", u0."inserted_at" FROM "users_tokens" AS u0 INNER JOIN "users" AS u1 ON u1."id" = u0."user_id" WHERE ((u0."token" = $1) AND (u0."context" = $2)) AND (u0."inserted_at" > $3::timestamp + (-(14)::numeric * interval '1 day')) [<<64, 6, 50, 99, 57, 74, 87, 137, 131, 30, 66, 148, 156, 59, 25, 129, 230, 170, 38, 224, 183, 99, 18, 71, 27, 153, 137, 239, 38, 213, 81, 199>>, "session", ~U[2025-10-30 01:16:39.641007Z]]
[90mâ†³ ShardWeb.UserAuth.get_user_by_token/1, at: lib/shard_web/user_auth.ex:314[0m
[debug] QUERY OK source="characters" db=1.5ms queue=0.1ms idle=298.7ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ Shard.Characters.get_character!/1, at: lib/shard/characters.ex:40[0m
[debug] QUERY OK source="users" db=1.7ms queue=0.1ms idle=300.6ms
SELECT u0."id", u0."email", u0."hashed_password", u0."confirmed_at", u0."admin", u0."inserted_at", u0."updated_at", u0."id" FROM "users" AS u0 WHERE (u0."id" = $1) [2]
[90mâ†³ ShardWeb.MudGameLive.get_character_from_params/1, at: lib/shard_web/live/user_live/mud_game_live.ex:261[0m
[debug] QUERY OK source="characters" db=2.1ms queue=0.1ms idle=301.3ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:279[0m
[debug] QUERY OK source="hotbar_slots" db=0.8ms queue=0.3ms idle=301.6ms
SELECT h0."id", h0."slot_number", h0."character_id", h0."item_id", h0."inventory_id", h0."inserted_at", h0."updated_at", h0."character_id" FROM "hotbar_slots" AS h0 WHERE (h0."character_id" = $1) ORDER BY h0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:280[0m
[debug] QUERY OK source="character_inventories" db=6.0ms idle=301.8ms
SELECT c0."id", c0."quantity", c0."slot_position", c0."equipped", c0."equipment_slot", c0."character_id", c0."item_id", c0."inserted_at", c0."updated_at", c0."character_id" FROM "character_inventories" AS c0 WHERE (c0."character_id" = $1) ORDER BY c0."character_id" [1]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:280[0m
[debug] QUERY OK source="room_items" db=0.7ms queue=0.6ms idle=308.1ms
SELECT r0."id", r0."location", r0."quantity", r0."x_position", r0."y_position", r0."respawn_timer", r0."is_permanent", r0."item_id", r0."dropped_by_character_id", r0."inserted_at", r0."updated_at" FROM "room_items" AS r0 INNER JOIN "items" AS i1 ON r0."item_id" = i1."id" WHERE (r0."location" = '0,2,0') AND (i1."name" = 'Tutorial Key') []
[90mâ†³ Shard.Items.create_tutorial_key/0, at: lib/shard/items.ex:342[0m
[debug] QUERY OK source="npcs" db=1.8ms idle=309.0ms
SELECT n0."id", n0."name", n0."description", n0."level", n0."health", n0."max_health", n0."mana", n0."max_mana", n0."strength", n0."dexterity", n0."intelligence", n0."constitution", n0."experience_reward", n0."gold_reward", n0."npc_type", n0."dialogue", n0."inventory", n0."location_x", n0."location_y", n0."location_z", n0."is_active", n0."respawn_time", n0."last_death_at", n0."faction", n0."aggression_level", n0."movement_pattern", n0."properties", n0."room_id", n0."inserted_at", n0."updated_at" FROM "npcs" AS n0 WHERE (((n0."location_x" = 0) AND (n0."location_y" = 0)) AND (n0."name" = 'Goldie')) []
[90mâ†³ Shard.Npcs.create_tutorial_npc_goldie/0, at: lib/shard/npcs.ex:171[0m
[debug] QUERY OK source="rooms" db=0.5ms idle=310.6ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 2, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="rooms" db=0.8ms idle=311.3ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 1, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="doors" db=0.8ms idle=24.0ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE ((d0."from_room_id" = $1) AND (d0."direction" = $2)) [11, "north"]
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:391[0m
[debug] QUERY OK db=0.2ms idle=22.2ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK source="doors" db=0.6ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.3ms
DELETE FROM "doors" WHERE "id" = $1 [348]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.3ms
DELETE FROM "doors" WHERE "id" = $1 [347]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=12.4ms
commit []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK db=0.5ms idle=36.1ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:402[0m
[debug] QUERY OK source="doors" db=0.7ms
INSERT INTO "doors" ("name","description","direction","door_type","from_room_id","is_locked","key_required","to_room_id","properties","new_dungeon","inserted_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) RETURNING "id" ["Locked Dungeon Gate", "A heavy iron gate that blocks the entrance to the dungeon. It requires a key to open.", "north", "locked_gate", 11, true, "Tutorial Key", 10, %{}, false, ~U[2025-10-30 01:16:39Z], ~U[2025-10-30 01:16:39Z]]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=1.2ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.5ms
INSERT INTO "doors" ("direction","door_type","from_room_id","is_locked","key_required","to_room_id","properties","new_dungeon","inserted_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) RETURNING "id" ["south", "locked_gate", 10, true, "Tutorial Key", 11, %{}, false, ~U[2025-10-30 01:16:39Z], ~U[2025-10-30 01:16:39Z]]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=2.9ms
commit []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:402[0m
[debug] QUERY OK source="monsters" db=0.5ms idle=44.4ms
SELECT m0."id", m0."name", m0."race", m0."health", m0."max_health", m0."attack_damage", m0."potential_loot_drops", m0."xp_amount", m0."level", m0."description", m0."location_id", m0."inserted_at", m0."updated_at" FROM "monsters" AS m0 []
[90mâ†³ Shard.Monsters.list_monsters/0, at: lib/shard/monsters.ex:21[0m
[debug] QUERY OK source="rooms" db=0.5ms queue=0.5ms idle=42.6ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ ShardWeb.UserLive.MonsterComponents.load_monsters_from_database/2, at: lib/shard_web/live/user_live/monster_components.ex:12[0m
[debug] QUERY OK source="rooms" db=3.2ms idle=37.5ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ anonymous fn/1 in ShardWeb.UserLive.MonsterComponents.load_monsters_from_database/2, at: lib/shard_web/live/user_live/monster_components.ex:20[0m
[debug] QUERY OK source="rooms" db=1.6ms queue=0.1ms idle=39.4ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [0, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:248[0m
[debug] QUERY OK source="doors" db=2.0ms queue=0.1ms idle=39.3ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (d0."from_room_id" = $1) [3]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:253[0m
[debug] Replied in 72ms
[debug] QUERY OK source="rooms" db=1.0ms idle=50.1ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=1.0ms queue=0.1ms idle=49.6ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."from_room_id" FROM "doors" AS d0 WHERE (d0."from_room_id" = ANY($1)) ORDER BY d0."from_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=2.3ms queue=0.1ms idle=50.8ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."to_room_id" FROM "doors" AS d0 WHERE (d0."to_room_id" = ANY($1)) ORDER BY d0."to_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=3.9ms idle=36.2ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=1.2ms queue=3.9ms idle=31.8ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[9, 10, 8, 11, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=1.0ms idle=35.0ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[10, 9, 11, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] HANDLE EVENT "keypress" in ShardWeb.MudGameLive
  Parameters: %{"key" => "ArrowRight"}
[debug] QUERY OK source="rooms" db=1.2ms queue=0.1ms idle=320.5ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [0, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.valid_movement/3, at: lib/shard_web/live/user_live/movement.ex:131[0m
[debug] QUERY OK source="doors" db=1.9ms queue=0.1ms idle=322.4ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE ((d0."from_room_id" = $1) AND (d0."direction" = $2)) [3, "east"]
[90mâ†³ ShardWeb.UserLive.Movement.valid_movement/3, at: lib/shard_web/live/user_live/movement.ex:152[0m
Moving through standard door
[debug] QUERY OK source="rooms" db=1.9ms idle=324.8ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (r0."id" = $1) [6]
[90mâ†³ ShardWeb.UserLive.Movement.valid_movement/3, at: lib/shard_web/live/user_live/movement.ex:169[0m
[debug] QUERY OK source="rooms" db=2.4ms idle=328.2ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [0, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.execute_movement/2, at: lib/shard_web/live/user_live/movement.ex:41[0m
[debug] QUERY OK source="rooms" db=1.5ms queue=0.4ms idle=331.3ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [1, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.execute_movement/2, at: lib/shard_web/live/user_live/movement.ex:42[0m
[debug] QUERY OK source="npcs" db=2.1ms queue=0.1ms idle=333.7ms
SELECT n0."id", n0."name", n0."description", n0."level", n0."health", n0."max_health", n0."mana", n0."max_mana", n0."strength", n0."dexterity", n0."intelligence", n0."constitution", n0."experience_reward", n0."gold_reward", n0."npc_type", n0."dialogue", n0."inventory", n0."location_x", n0."location_y", n0."location_z", n0."is_active", n0."respawn_time", n0."last_death_at", n0."faction", n0."aggression_level", n0."movement_pattern", n0."properties", n0."room_id", n0."inserted_at", n0."updated_at" FROM "npcs" AS n0 WHERE (((n0."location_x" = $1) AND (n0."location_y" = $2)) AND (n0."is_active" = TRUE)) [1, 0]
[90mâ†³ ShardWeb.UserLive.Movement.execute_movement/2, at: lib/shard_web/live/user_live/movement.ex:45[0m
[debug] QUERY OK source="room_items" db=3.3ms idle=336.3ms
SELECT i1."name", i1."description", i1."item_type", r0."quantity" FROM "room_items" AS r0 INNER JOIN "items" AS i1 ON r0."item_id" = i1."id" WHERE (r0."location" = $1) AND ((i1."is_active" IS NULL) OR (i1."is_active" = TRUE)) ["1,0,0"]
[90mâ†³ ShardWeb.UserLive.Movement.get_items_at_location/3, at: lib/shard_web/live/user_live/movement.ex:294[0m
[debug] QUERY OK source="items" db=1.9ms idle=340.0ms
SELECT i0."name", i0."description", i0."item_type" FROM "items" AS i0 WHERE (((i0."location" = $1) AND ((i0."map" = $2) OR (i0."map" IS NULL))) AND ((i0."is_active" IS NULL) OR (i0."is_active" = TRUE))) ["1,0,0", "tutorial_terrain"]
[90mâ†³ ShardWeb.UserLive.Movement.get_items_at_location/3, at: lib/shard_web/live/user_live/movement.ex:309[0m
[debug] QUERY OK source="rooms" db=0.7ms idle=342.2ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [1, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:248[0m
[debug] QUERY OK source="doors" db=1.2ms idle=343.3ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (d0."from_room_id" = $1) [6]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:253[0m
[debug] Replied in 46ms
[debug] QUERY OK source="rooms" db=0.6ms idle=27.6ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.8ms idle=23.3ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."to_room_id" FROM "doors" AS d0 WHERE (d0."to_room_id" = ANY($1)) ORDER BY d0."to_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.8ms queue=0.1ms idle=25.8ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."from_room_id" FROM "doors" AS d0 WHERE (d0."from_room_id" = ANY($1)) ORDER BY d0."from_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.7ms idle=21.6ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.4ms idle=19.6ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[9, 10, 8, 11, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.4ms idle=16.6ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[10, 9, 11, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] HANDLE EVENT "keypress" in ShardWeb.MudGameLive
  Parameters: %{"key" => "ArrowRight"}
[debug] QUERY OK source="rooms" db=1.7ms queue=0.2ms idle=243.5ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [1, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.valid_movement/3, at: lib/shard_web/live/user_live/movement.ex:131[0m
[debug] QUERY OK source="doors" db=1.6ms queue=0.1ms idle=243.9ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE ((d0."from_room_id" = $1) AND (d0."direction" = $2)) [6, "east"]
[90mâ†³ ShardWeb.UserLive.Movement.valid_movement/3, at: lib/shard_web/live/user_live/movement.ex:152[0m
Moving through standard door
[debug] QUERY OK source="rooms" db=1.2ms queue=0.1ms idle=245.3ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ ShardWeb.UserLive.Movement.valid_movement/3, at: lib/shard_web/live/user_live/movement.ex:169[0m
[debug] QUERY OK source="rooms" db=1.1ms queue=0.1ms idle=246.5ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [1, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.execute_movement/2, at: lib/shard_web/live/user_live/movement.ex:41[0m
[debug] QUERY OK source="rooms" db=1.4ms queue=0.1ms idle=244.6ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.execute_movement/2, at: lib/shard_web/live/user_live/movement.ex:42[0m
[debug] QUERY OK source="npcs" db=1.5ms queue=0.1ms idle=245.5ms
SELECT n0."id", n0."name", n0."description", n0."level", n0."health", n0."max_health", n0."mana", n0."max_mana", n0."strength", n0."dexterity", n0."intelligence", n0."constitution", n0."experience_reward", n0."gold_reward", n0."npc_type", n0."dialogue", n0."inventory", n0."location_x", n0."location_y", n0."location_z", n0."is_active", n0."respawn_time", n0."last_death_at", n0."faction", n0."aggression_level", n0."movement_pattern", n0."properties", n0."room_id", n0."inserted_at", n0."updated_at" FROM "npcs" AS n0 WHERE (((n0."location_x" = $1) AND (n0."location_y" = $2)) AND (n0."is_active" = TRUE)) [2, 0]
[90mâ†³ ShardWeb.UserLive.Movement.execute_movement/2, at: lib/shard_web/live/user_live/movement.ex:45[0m
[debug] QUERY OK source="room_items" db=1.6ms queue=0.1ms idle=247.7ms
SELECT i1."name", i1."description", i1."item_type", r0."quantity" FROM "room_items" AS r0 INNER JOIN "items" AS i1 ON r0."item_id" = i1."id" WHERE (r0."location" = $1) AND ((i1."is_active" IS NULL) OR (i1."is_active" = TRUE)) ["2,0,0"]
[90mâ†³ ShardWeb.UserLive.Movement.get_items_at_location/3, at: lib/shard_web/live/user_live/movement.ex:294[0m
[debug] QUERY OK source="items" db=2.5ms queue=0.1ms idle=248.8ms
SELECT i0."name", i0."description", i0."item_type" FROM "items" AS i0 WHERE (((i0."location" = $1) AND ((i0."map" = $2) OR (i0."map" IS NULL))) AND ((i0."is_active" IS NULL) OR (i0."is_active" = TRUE))) ["2,0,0", "tutorial_terrain"]
[90mâ†³ ShardWeb.UserLive.Movement.get_items_at_location/3, at: lib/shard_web/live/user_live/movement.ex:309[0m
[debug] QUERY OK source="rooms" db=1.5ms queue=0.1ms idle=251.1ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:248[0m
[debug] QUERY OK source="doors" db=2.0ms queue=0.4ms idle=253.3ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (d0."from_room_id" = $1) [9]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:253[0m
[debug] Replied in 27ms
[debug] QUERY OK source="rooms" db=0.5ms queue=0.2ms idle=24.4ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=1.1ms queue=0.3ms idle=21.2ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."from_room_id" FROM "doors" AS d0 WHERE (d0."from_room_id" = ANY($1)) ORDER BY d0."from_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=1.8ms queue=0.1ms idle=23.2ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."to_room_id" FROM "doors" AS d0 WHERE (d0."to_room_id" = ANY($1)) ORDER BY d0."to_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=1.0ms queue=0.1ms idle=21.2ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.6ms idle=20.9ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[9, 10, 8, 11, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.9ms idle=18.4ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[10, 9, 11, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[info] GET /play/tutorial_terrain
[debug] Processing with ShardWeb.MudGameLive.__live__/0
  Parameters: %{"character_id" => "2", "character_name" => "player2", "map_id" => "tutorial_terrain"}
  Pipelines: [:browser, :require_authenticated_user]
[debug] QUERY OK source="users_tokens" db=0.8ms idle=183.8ms
SELECT u1."id", u1."email", u1."hashed_password", u1."confirmed_at", u1."admin", u1."inserted_at", u1."updated_at", u0."authenticated_at", u0."inserted_at" FROM "users_tokens" AS u0 INNER JOIN "users" AS u1 ON u1."id" = u0."user_id" WHERE ((u0."token" = $1) AND (u0."context" = $2)) AND (u0."inserted_at" > $3::timestamp + (-(14)::numeric * interval '1 day')) [<<252, 177, 130, 42, 52, 90, 30, 12, 236, 189, 45, 78, 245, 213, 165, 194, 80, 149, 102, 173, 163, 41, 106, 208, 151, 132, 26, 164, 79, 36, 197, 82>>, "session", ~U[2025-10-30 01:16:47.234019Z]]
[90mâ†³ ShardWeb.UserAuth.fetch_current_scope_for_user/2, at: lib/shard_web/user_auth.ex:76[0m
[debug] QUERY OK source="characters" db=0.4ms idle=190.7ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [2]
[90mâ†³ Shard.Characters.get_character!/1, at: lib/shard/characters.ex:40[0m
[debug] QUERY OK source="users" db=0.4ms idle=191.4ms
SELECT u0."id", u0."email", u0."hashed_password", u0."confirmed_at", u0."admin", u0."inserted_at", u0."updated_at", u0."id" FROM "users" AS u0 WHERE (u0."id" = $1) [1]
[90mâ†³ ShardWeb.MudGameLive.get_character_from_params/1, at: lib/shard_web/live/user_live/mud_game_live.ex:261[0m
[debug] QUERY OK source="characters" db=0.3ms idle=192.2ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [2]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:279[0m
[debug] QUERY OK source="hotbar_slots" db=0.3ms idle=193.0ms
SELECT h0."id", h0."slot_number", h0."character_id", h0."item_id", h0."inventory_id", h0."inserted_at", h0."updated_at", h0."character_id" FROM "hotbar_slots" AS h0 WHERE (h0."character_id" = $1) ORDER BY h0."character_id" [2]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:280[0m
[debug] QUERY OK source="character_inventories" db=0.6ms queue=0.3ms idle=192.9ms
SELECT c0."id", c0."quantity", c0."slot_position", c0."equipped", c0."equipment_slot", c0."character_id", c0."item_id", c0."inserted_at", c0."updated_at", c0."character_id" FROM "character_inventories" AS c0 WHERE (c0."character_id" = $1) ORDER BY c0."character_id" [2]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:280[0m
[debug] QUERY OK source="room_items" db=1.2ms idle=194.2ms
SELECT r0."id", r0."location", r0."quantity", r0."x_position", r0."y_position", r0."respawn_timer", r0."is_permanent", r0."item_id", r0."dropped_by_character_id", r0."inserted_at", r0."updated_at" FROM "room_items" AS r0 INNER JOIN "items" AS i1 ON r0."item_id" = i1."id" WHERE (r0."location" = '0,2,0') AND (i1."name" = 'Tutorial Key') []
[90mâ†³ Shard.Items.create_tutorial_key/0, at: lib/shard/items.ex:342[0m
[debug] QUERY OK source="npcs" db=0.4ms idle=195.4ms
SELECT n0."id", n0."name", n0."description", n0."level", n0."health", n0."max_health", n0."mana", n0."max_mana", n0."strength", n0."dexterity", n0."intelligence", n0."constitution", n0."experience_reward", n0."gold_reward", n0."npc_type", n0."dialogue", n0."inventory", n0."location_x", n0."location_y", n0."location_z", n0."is_active", n0."respawn_time", n0."last_death_at", n0."faction", n0."aggression_level", n0."movement_pattern", n0."properties", n0."room_id", n0."inserted_at", n0."updated_at" FROM "npcs" AS n0 WHERE (((n0."location_x" = 0) AND (n0."location_y" = 0)) AND (n0."name" = 'Goldie')) []
[90mâ†³ Shard.Npcs.create_tutorial_npc_goldie/0, at: lib/shard/npcs.ex:171[0m
[debug] QUERY OK source="rooms" db=0.4ms queue=0.1ms idle=27.1ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 2, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="rooms" db=0.2ms idle=23.9ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 1, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="doors" db=0.4ms idle=13.8ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE ((d0."from_room_id" = $1) AND (d0."direction" = $2)) [11, "north"]
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:391[0m
[debug] QUERY OK db=0.3ms idle=8.0ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK source="doors" db=0.4ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.3ms
DELETE FROM "doors" WHERE "id" = $1 [350]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.2ms
DELETE FROM "doors" WHERE "id" = $1 [349]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=1.3ms
commit []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK db=0.1ms idle=11.0ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:402[0m
[debug] QUERY OK source="doors" db=1.3ms
INSERT INTO "doors" ("name","description","direction","door_type","from_room_id","is_locked","key_required","to_room_id","properties","new_dungeon","inserted_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) RETURNING "id" ["Locked Dungeon Gate", "A heavy iron gate that blocks the entrance to the dungeon. It requires a key to open.", "north", "locked_gate", 11, true, "Tutorial Key", 10, %{}, false, ~U[2025-10-30 01:16:47Z], ~U[2025-10-30 01:16:47Z]]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.4ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.5ms
INSERT INTO "doors" ("direction","door_type","from_room_id","is_locked","key_required","to_room_id","properties","new_dungeon","inserted_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) RETURNING "id" ["south", "locked_gate", 10, true, "Tutorial Key", 11, %{}, false, ~U[2025-10-30 01:16:47Z], ~U[2025-10-30 01:16:47Z]]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=1.4ms
commit []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:402[0m
[debug] QUERY OK source="monsters" db=1.0ms idle=16.3ms
SELECT m0."id", m0."name", m0."race", m0."health", m0."max_health", m0."attack_damage", m0."potential_loot_drops", m0."xp_amount", m0."level", m0."description", m0."location_id", m0."inserted_at", m0."updated_at" FROM "monsters" AS m0 []
[90mâ†³ Shard.Monsters.list_monsters/0, at: lib/shard/monsters.ex:21[0m
[debug] QUERY OK source="rooms" db=0.5ms queue=0.1ms idle=17.0ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ ShardWeb.UserLive.MonsterComponents.load_monsters_from_database/2, at: lib/shard_web/live/user_live/monster_components.ex:12[0m
[debug] QUERY OK source="rooms" db=0.6ms idle=17.4ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ anonymous fn/1 in ShardWeb.UserLive.MonsterComponents.load_monsters_from_database/2, at: lib/shard_web/live/user_live/monster_components.ex:20[0m
[debug] QUERY OK source="rooms" db=0.9ms idle=16.7ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [0, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:248[0m
[debug] QUERY OK source="doors" db=0.5ms queue=0.4ms idle=17.1ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (d0."from_room_id" = $1) [3]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:253[0m
[debug] QUERY OK source="rooms" db=0.4ms idle=20.4ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.7ms queue=0.1ms idle=21.0ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."to_room_id" FROM "doors" AS d0 WHERE (d0."to_room_id" = ANY($1)) ORDER BY d0."to_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.6ms queue=0.1ms idle=20.1ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."from_room_id" FROM "doors" AS d0 WHERE (d0."from_room_id" = ANY($1)) ORDER BY d0."from_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.5ms idle=18.1ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.5ms idle=13.1ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.3ms idle=12.0ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[10, 11, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[info] Sent 200 in 47ms
[info] CONNECTED TO Phoenix.LiveView.Socket in 37Âµs
  Transport: :websocket
  Serializer: Phoenix.Socket.V2.JSONSerializer
  Parameters: %{"_csrf_token" => "NyEFYUwpFi0YHBo_CAx3AAsyEiN5KVQ2_fK55ppcsyXNy46RCmUtHe2b", "_live_referer" => "undefined", "_mount_attempts" => "0", "_mounts" => "0", "_track_static" => %{"0" => "http://localhost:4000/assets/css/app.css", "1" => "http://localhost:4000/assets/js/app.js"}, "vsn" => "2.0.0"}
[debug] MOUNT ShardWeb.MudGameLive
  Parameters: %{"character_id" => "2", "character_name" => "player2", "map_id" => "tutorial_terrain"}
  Session: %{"_csrf_token" => "hGNTyYfNkeBqq8ARH_GW1LfT", "live_socket_id" => "users_sessions:_LGCKjRaHgzsvS1O9dWlwlCVZq2jKWrQl4QapE8kxVI=", "user_token" => <<252, 177, 130, 42, 52, 90, 30, 12, 236, 189, 45, 78, 245, 213, 165, 194, 80, 149, 102, 173, 163, 41, 106, 208, 151, 132, 26, 164, 79, 36, 197, 82>>}
[debug] QUERY OK source="users_tokens" db=1.3ms idle=587.0ms
SELECT u1."id", u1."email", u1."hashed_password", u1."confirmed_at", u1."admin", u1."inserted_at", u1."updated_at", u0."authenticated_at", u0."inserted_at" FROM "users_tokens" AS u0 INNER JOIN "users" AS u1 ON u1."id" = u0."user_id" WHERE ((u0."token" = $1) AND (u0."context" = $2)) AND (u0."inserted_at" > $3::timestamp + (-(14)::numeric * interval '1 day')) [<<252, 177, 130, 42, 52, 90, 30, 12, 236, 189, 45, 78, 245, 213, 165, 194, 80, 149, 102, 173, 163, 41, 106, 208, 151, 132, 26, 164, 79, 36, 197, 82>>, "session", ~U[2025-10-30 01:16:47.843339Z]]
[90mâ†³ ShardWeb.UserAuth.get_user_by_token/1, at: lib/shard_web/user_auth.ex:314[0m
[debug] QUERY OK source="characters" db=0.7ms idle=588.1ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [2]
[90mâ†³ Shard.Characters.get_character!/1, at: lib/shard/characters.ex:40[0m
[debug] QUERY OK source="users" db=1.3ms idle=588.9ms
SELECT u0."id", u0."email", u0."hashed_password", u0."confirmed_at", u0."admin", u0."inserted_at", u0."updated_at", u0."id" FROM "users" AS u0 WHERE (u0."id" = $1) [1]
[90mâ†³ ShardWeb.MudGameLive.get_character_from_params/1, at: lib/shard_web/live/user_live/mud_game_live.ex:261[0m
[debug] QUERY OK source="characters" db=0.9ms idle=590.3ms
SELECT c0."id", c0."name", c0."level", c0."class", c0."race", c0."health", c0."mana", c0."strength", c0."dexterity", c0."intelligence", c0."constitution", c0."experience", c0."gold", c0."location", c0."description", c0."is_active", c0."user_id", c0."inserted_at", c0."updated_at" FROM "characters" AS c0 WHERE (c0."id" = $1) [2]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:279[0m
[debug] QUERY OK source="hotbar_slots" db=0.7ms idle=593.5ms
SELECT h0."id", h0."slot_number", h0."character_id", h0."item_id", h0."inventory_id", h0."inserted_at", h0."updated_at", h0."character_id" FROM "hotbar_slots" AS h0 WHERE (h0."character_id" = $1) ORDER BY h0."character_id" [2]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:280[0m
[debug] QUERY OK source="character_inventories" db=0.4ms queue=0.1ms idle=592.2ms
SELECT c0."id", c0."quantity", c0."slot_position", c0."equipped", c0."equipment_slot", c0."character_id", c0."item_id", c0."inserted_at", c0."updated_at", c0."character_id" FROM "character_inventories" AS c0 WHERE (c0."character_id" = $1) ORDER BY c0."character_id" [2]
[90mâ†³ ShardWeb.MudGameLive.load_character_with_associations/1, at: lib/shard_web/live/user_live/mud_game_live.ex:280[0m
[debug] QUERY OK source="room_items" db=1.0ms idle=593.6ms
SELECT r0."id", r0."location", r0."quantity", r0."x_position", r0."y_position", r0."respawn_timer", r0."is_permanent", r0."item_id", r0."dropped_by_character_id", r0."inserted_at", r0."updated_at" FROM "room_items" AS r0 INNER JOIN "items" AS i1 ON r0."item_id" = i1."id" WHERE (r0."location" = '0,2,0') AND (i1."name" = 'Tutorial Key') []
[90mâ†³ Shard.Items.create_tutorial_key/0, at: lib/shard/items.ex:342[0m
[debug] QUERY OK source="npcs" db=0.4ms queue=0.1ms idle=594.2ms
SELECT n0."id", n0."name", n0."description", n0."level", n0."health", n0."max_health", n0."mana", n0."max_mana", n0."strength", n0."dexterity", n0."intelligence", n0."constitution", n0."experience_reward", n0."gold_reward", n0."npc_type", n0."dialogue", n0."inventory", n0."location_x", n0."location_y", n0."location_z", n0."is_active", n0."respawn_time", n0."last_death_at", n0."faction", n0."aggression_level", n0."movement_pattern", n0."properties", n0."room_id", n0."inserted_at", n0."updated_at" FROM "npcs" AS n0 WHERE (((n0."location_x" = 0) AND (n0."location_y" = 0)) AND (n0."name" = 'Goldie')) []
[90mâ†³ Shard.Npcs.create_tutorial_npc_goldie/0, at: lib/shard/npcs.ex:171[0m
[debug] QUERY OK source="rooms" db=0.7ms queue=0.3ms idle=594.0ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 2, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="rooms" db=0.5ms queue=0.4ms idle=595.6ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 1, 0]
[90mâ†³ Shard.Items.ensure_room_exists/4, at: lib/shard/items.ex:419[0m
[debug] QUERY OK source="doors" db=1.5ms queue=0.2ms idle=19.8ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE ((d0."from_room_id" = $1) AND (d0."direction" = $2)) [11, "north"]
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:391[0m
[debug] QUERY OK db=0.5ms queue=0.1ms idle=22.7ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK source="doors" db=0.5ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.6ms
DELETE FROM "doors" WHERE "id" = $1 [352]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.8ms
DELETE FROM "doors" WHERE "id" = $1 [351]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=11.3ms
commit []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:395[0m
[debug] QUERY OK db=0.6ms queue=0.1ms idle=36.4ms
begin []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:402[0m
[debug] QUERY OK source="doors" db=1.6ms
INSERT INTO "doors" ("name","description","direction","door_type","from_room_id","is_locked","key_required","to_room_id","properties","new_dungeon","inserted_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) RETURNING "id" ["Locked Dungeon Gate", "A heavy iron gate that blocks the entrance to the dungeon. It requires a key to open.", "north", "locked_gate", 11, true, "Tutorial Key", 10, %{}, false, ~U[2025-10-30 01:16:47Z], ~U[2025-10-30 01:16:47Z]]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=1.0ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (((d0."from_room_id" = $1) AND (d0."to_room_id" = $2)) AND (d0."direction" = $3)) [10, 11, "south"]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK source="doors" db=0.7ms
INSERT INTO "doors" ("direction","door_type","from_room_id","is_locked","key_required","to_room_id","properties","new_dungeon","inserted_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) RETURNING "id" ["south", "locked_gate", 10, true, "Tutorial Key", 11, %{}, false, ~U[2025-10-30 01:16:47Z], ~U[2025-10-30 01:16:47Z]]
[90mâ†³ anonymous fn/3 in Ecto.Adapters.SQL.checkout_or_transaction/4, at: lib/ecto/adapters/sql.ex:1458[0m
[debug] QUERY OK db=2.0ms
commit []
[90mâ†³ Shard.Items.create_dungeon_door/0, at: lib/shard/items.ex:402[0m
[debug] QUERY OK source="monsters" db=0.4ms idle=44.0ms
SELECT m0."id", m0."name", m0."race", m0."health", m0."max_health", m0."attack_damage", m0."potential_loot_drops", m0."xp_amount", m0."level", m0."description", m0."location_id", m0."inserted_at", m0."updated_at" FROM "monsters" AS m0 []
[90mâ†³ Shard.Monsters.list_monsters/0, at: lib/shard/monsters.ex:21[0m
[debug] QUERY OK source="rooms" db=0.8ms queue=0.1ms idle=38.4ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ ShardWeb.UserLive.MonsterComponents.load_monsters_from_database/2, at: lib/shard_web/live/user_live/monster_components.ex:12[0m
[debug] QUERY OK source="rooms" db=2.0ms queue=0.5ms idle=39.9ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ anonymous fn/1 in ShardWeb.UserLive.MonsterComponents.load_monsters_from_database/2, at: lib/shard_web/live/user_live/monster_components.ex:20[0m
[debug] QUERY OK source="rooms" db=0.6ms idle=40.9ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [0, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:248[0m
[debug] QUERY OK source="doors" db=0.8ms idle=40.2ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (d0."from_room_id" = $1) [3]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:253[0m
[debug] Replied in 73ms
[debug] QUERY OK source="rooms" db=0.4ms idle=47.3ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.9ms idle=45.3ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."from_room_id" FROM "doors" AS d0 WHERE (d0."from_room_id" = ANY($1)) ORDER BY d0."from_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=3.0ms idle=47.2ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."to_room_id" FROM "doors" AS d0 WHERE (d0."to_room_id" = ANY($1)) ORDER BY d0."to_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.8ms idle=30.8ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=1.1ms queue=0.3ms idle=21.8ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[10, 11, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=1.4ms queue=0.1ms idle=22.7ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] HANDLE EVENT "keypress" in ShardWeb.MudGameLive
  Parameters: %{"key" => "ArrowRight"}
[debug] QUERY OK source="rooms" db=1.3ms queue=0.5ms idle=551.5ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [0, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.valid_movement/3, at: lib/shard_web/live/user_live/movement.ex:131[0m
[debug] QUERY OK source="doors" db=2.2ms queue=0.2ms idle=551.0ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE ((d0."from_room_id" = $1) AND (d0."direction" = $2)) [3, "east"]
[90mâ†³ ShardWeb.UserLive.Movement.valid_movement/3, at: lib/shard_web/live/user_live/movement.ex:152[0m
Moving through standard door
[debug] QUERY OK source="rooms" db=1.5ms queue=0.5ms idle=553.6ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (r0."id" = $1) [6]
[90mâ†³ ShardWeb.UserLive.Movement.valid_movement/3, at: lib/shard_web/live/user_live/movement.ex:169[0m
[debug] QUERY OK source="rooms" db=0.8ms idle=556.1ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [0, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.execute_movement/2, at: lib/shard_web/live/user_live/movement.ex:41[0m
[debug] QUERY OK source="rooms" db=1.0ms queue=0.1ms idle=549.7ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [1, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.execute_movement/2, at: lib/shard_web/live/user_live/movement.ex:42[0m
[debug] QUERY OK source="npcs" db=3.7ms queue=0.1ms idle=550.6ms
SELECT n0."id", n0."name", n0."description", n0."level", n0."health", n0."max_health", n0."mana", n0."max_mana", n0."strength", n0."dexterity", n0."intelligence", n0."constitution", n0."experience_reward", n0."gold_reward", n0."npc_type", n0."dialogue", n0."inventory", n0."location_x", n0."location_y", n0."location_z", n0."is_active", n0."respawn_time", n0."last_death_at", n0."faction", n0."aggression_level", n0."movement_pattern", n0."properties", n0."room_id", n0."inserted_at", n0."updated_at" FROM "npcs" AS n0 WHERE (((n0."location_x" = $1) AND (n0."location_y" = $2)) AND (n0."is_active" = TRUE)) [1, 0]
[90mâ†³ ShardWeb.UserLive.Movement.execute_movement/2, at: lib/shard_web/live/user_live/movement.ex:45[0m
[debug] QUERY OK source="room_items" db=2.1ms queue=0.3ms idle=553.2ms
SELECT i1."name", i1."description", i1."item_type", r0."quantity" FROM "room_items" AS r0 INNER JOIN "items" AS i1 ON r0."item_id" = i1."id" WHERE (r0."location" = $1) AND ((i1."is_active" IS NULL) OR (i1."is_active" = TRUE)) ["1,0,0"]
[90mâ†³ ShardWeb.UserLive.Movement.get_items_at_location/3, at: lib/shard_web/live/user_live/movement.ex:294[0m
[debug] QUERY OK source="items" db=1.8ms queue=0.3ms idle=554.4ms
SELECT i0."name", i0."description", i0."item_type" FROM "items" AS i0 WHERE (((i0."location" = $1) AND ((i0."map" = $2) OR (i0."map" IS NULL))) AND ((i0."is_active" IS NULL) OR (i0."is_active" = TRUE))) ["1,0,0", "tutorial_terrain"]
[90mâ†³ ShardWeb.UserLive.Movement.get_items_at_location/3, at: lib/shard_web/live/user_live/movement.ex:309[0m
[debug] QUERY OK source="rooms" db=1.7ms queue=1.5ms idle=555.9ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [1, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:248[0m
[debug] QUERY OK source="doors" db=2.4ms queue=0.2ms idle=559.9ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (d0."from_room_id" = $1) [6]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:253[0m
[debug] Replied in 34ms
[debug] QUERY OK source="rooms" db=0.8ms queue=0.2ms idle=33.7ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.8ms idle=30.0ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."from_room_id" FROM "doors" AS d0 WHERE (d0."from_room_id" = ANY($1)) ORDER BY d0."from_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=1.9ms idle=32.5ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."to_room_id" FROM "doors" AS d0 WHERE (d0."to_room_id" = ANY($1)) ORDER BY d0."to_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=1.4ms idle=29.3ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.6ms queue=0.7ms idle=29.8ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.6ms queue=0.6ms idle=24.4ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[10, 11, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] HANDLE EVENT "keypress" in ShardWeb.MudGameLive
  Parameters: %{"key" => "ArrowRight"}
[debug] QUERY OK source="rooms" db=0.5ms idle=302.4ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [1, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.valid_movement/3, at: lib/shard_web/live/user_live/movement.ex:131[0m
[debug] QUERY OK source="doors" db=0.4ms queue=0.1ms idle=300.5ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE ((d0."from_room_id" = $1) AND (d0."direction" = $2)) [6, "east"]
[90mâ†³ ShardWeb.UserLive.Movement.valid_movement/3, at: lib/shard_web/live/user_live/movement.ex:152[0m
Moving through standard door
[debug] QUERY OK source="rooms" db=0.8ms queue=0.2ms idle=296.0ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (r0."id" = $1) [9]
[90mâ†³ ShardWeb.UserLive.Movement.valid_movement/3, at: lib/shard_web/live/user_live/movement.ex:169[0m
[debug] QUERY OK source="rooms" db=0.2ms idle=294.4ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [1, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.execute_movement/2, at: lib/shard_web/live/user_live/movement.ex:41[0m
[debug] QUERY OK source="rooms" db=0.2ms idle=291.4ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.execute_movement/2, at: lib/shard_web/live/user_live/movement.ex:42[0m
[debug] QUERY OK source="npcs" db=2.1ms queue=0.1ms idle=289.2ms
SELECT n0."id", n0."name", n0."description", n0."level", n0."health", n0."max_health", n0."mana", n0."max_mana", n0."strength", n0."dexterity", n0."intelligence", n0."constitution", n0."experience_reward", n0."gold_reward", n0."npc_type", n0."dialogue", n0."inventory", n0."location_x", n0."location_y", n0."location_z", n0."is_active", n0."respawn_time", n0."last_death_at", n0."faction", n0."aggression_level", n0."movement_pattern", n0."properties", n0."room_id", n0."inserted_at", n0."updated_at" FROM "npcs" AS n0 WHERE (((n0."location_x" = $1) AND (n0."location_y" = $2)) AND (n0."is_active" = TRUE)) [2, 0]
[90mâ†³ ShardWeb.UserLive.Movement.execute_movement/2, at: lib/shard_web/live/user_live/movement.ex:45[0m
[debug] QUERY OK source="room_items" db=0.8ms idle=291.5ms
SELECT i1."name", i1."description", i1."item_type", r0."quantity" FROM "room_items" AS r0 INNER JOIN "items" AS i1 ON r0."item_id" = i1."id" WHERE (r0."location" = $1) AND ((i1."is_active" IS NULL) OR (i1."is_active" = TRUE)) ["2,0,0"]
[90mâ†³ ShardWeb.UserLive.Movement.get_items_at_location/3, at: lib/shard_web/live/user_live/movement.ex:294[0m
[debug] QUERY OK source="items" db=0.5ms idle=290.4ms
SELECT i0."name", i0."description", i0."item_type" FROM "items" AS i0 WHERE (((i0."location" = $1) AND ((i0."map" = $2) OR (i0."map" IS NULL))) AND ((i0."is_active" IS NULL) OR (i0."is_active" = TRUE))) ["2,0,0", "tutorial_terrain"]
[90mâ†³ ShardWeb.UserLive.Movement.get_items_at_location/3, at: lib/shard_web/live/user_live/movement.ex:309[0m
[debug] QUERY OK source="rooms" db=0.4ms queue=0.1ms idle=288.9ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 WHERE (((r0."x_coordinate" = $1) AND (r0."y_coordinate" = $2)) AND (r0."z_coordinate" = $3)) [2, 0, 0]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:248[0m
[debug] QUERY OK source="doors" db=1.0ms queue=0.4ms idle=289.7ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 WHERE (d0."from_room_id" = $1) [9]
[90mâ†³ ShardWeb.UserLive.Movement.compute_available_exits/1, at: lib/shard_web/live/user_live/movement.ex:253[0m
[debug] Replied in 11ms
[debug] QUERY OK source="rooms" db=0.8ms idle=11.2ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at" FROM "rooms" AS r0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.8ms queue=0.1ms idle=11.7ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."to_room_id" FROM "doors" AS d0 WHERE (d0."to_room_id" = ANY($1)) ORDER BY d0."to_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=1.4ms queue=0.1ms idle=10.4ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at", d0."from_room_id" FROM "doors" AS d0 WHERE (d0."from_room_id" = ANY($1)) ORDER BY d0."from_room_id" [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:282[0m
[debug] QUERY OK source="doors" db=0.6ms idle=11.9ms
SELECT d0."id", d0."name", d0."description", d0."direction", d0."is_locked", d0."key_required", d0."door_type", d0."properties", d0."new_dungeon", d0."from_room_id", d0."to_room_id", d0."inserted_at", d0."updated_at" FROM "doors" AS d0 []
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.3ms idle=10.2ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[10, 11, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] QUERY OK source="rooms" db=0.8ms idle=12.4ms
SELECT r0."id", r0."name", r0."description", r0."x_coordinate", r0."y_coordinate", r0."z_coordinate", r0."is_public", r0."room_type", r0."properties", r0."inserted_at", r0."updated_at", r0."id" FROM "rooms" AS r0 WHERE (r0."id" = ANY($1)) [[11, 10, 9, 8, 7, 6, 5, 4, 3]]
[90mâ†³ ShardWeb.UserLive.MapComponents.minimap/1, at: lib/shard_web/live/user_live/map_components.ex:283[0m
[debug] HANDLE EVENT "keypress" in ShardWeb.MudGameLive
  Parameters: %{"key" => "a"}
[debug] Replied in 403Âµs
[debug] HANDLE EVENT "update_command" in ShardWeb.MudGameLive
  Parameters: %{"_target" => ["command", "text"], "command" => %{"text" => "a"}}
[debug] Replied in 216Âµs
[debug] HANDLE EVENT "keypress" in ShardWeb.MudGameLive
  Parameters: %{"key" => "t"}
[debug] Replied in 430Âµs
[debug] HANDLE EVENT "update_command" in ShardWeb.MudGameLive
  Parameters: %{"_target" => ["command", "text"], "command" => %{"text" => "at"}}
[debug] Replied in 571Âµs
[debug] HANDLE EVENT "keypress" in ShardWeb.MudGameLive
  Parameters: %{"key" => "t"}
[debug] Replied in 535Âµs
[debug] HANDLE EVENT "update_command" in ShardWeb.MudGameLive
  Parameters: %{"_target" => ["command", "text"], "command" => %{"text" => "att"}}
[debug] Replied in 604Âµs
[debug] HANDLE EVENT "keypress" in ShardWeb.MudGameLive
  Parameters: %{"key" => "a"}
[debug] Replied in 268Âµs
[debug] HANDLE EVENT "update_command" in ShardWeb.MudGameLive
  Parameters: %{"_target" => ["command", "text"], "command" => %{"text" => "atta"}}
[debug] Replied in 213Âµs
[debug] HANDLE EVENT "keypress" in ShardWeb.MudGameLive
  Parameters: %{"key" => "c"}
[debug] Replied in 262Âµs
[debug] HANDLE EVENT "update_command" in ShardWeb.MudGameLive
  Parameters: %{"_target" => ["command", "text"], "command" => %{"text" => "attac"}}
[debug] Replied in 243Âµs
[debug] HANDLE EVENT "keypress" in ShardWeb.MudGameLive
  Parameters: %{"key" => "k"}
[debug] Replied in 280Âµs
[debug] HANDLE EVENT "update_command" in ShardWeb.MudGameLive
  Parameters: %{"_target" => ["command", "text"], "command" => %{"text" => "attack"}}
[debug] Replied in 318Âµs
[debug] HANDLE EVENT "keypress" in ShardWeb.MudGameLive
  Parameters: %{"key" => "Enter"}
[debug] Replied in 590Âµs
[debug] HANDLE EVENT "submit_command" in ShardWeb.MudGameLive
  Parameters: %{"command" => %{"text" => "attack"}}
[debug] Replied in 844Âµs
